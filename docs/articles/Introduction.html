<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An Introduction to <strong>PGRdup</strong> package • PGRdup</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">PGRdup</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
    Home
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-code"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="../articles/Introduction.html">
    <span class="fa fa-file-o"></span>
     
    An Introduction to PGRdup package
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/aravind-j/PGRdup">
    <span class="fa fa-github-alt"></span>
     
    Github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>An Introduction to <strong>PGRdup</strong> package</h1>
                        <h4 class="author">J. Aravind<sup>1</sup>, J. Radhamani<sup>1</sup>, Kalyani Srinivasan<sup>1</sup>, B. Ananda Subhash<sup>2</sup> and R. K. Tyagi<sup>1</sup>
</h4>
            
            <h4 class="date">2018-01-13</h4>
          </div>

    
    
<div class="contents">
<ol style="list-style-type: decimal">
<li>ICAR-National Bureau of Plant Genetic Resources, New Delhi, India</li>
<li>Centre for Development of Advanced Computing, Thiruvananthapuram, Kerala, India</li>
</ol>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p><strong>PGRdup</strong> is an <code>R</code> package to facilitate the search for probable/possible duplicate accessions in Plant Genetic Resources (PGR) collections using passport databases. Primarily this package implements a workflow (Fig. 1) designed to fetch groups or sets of germplasm accessions with similar passport data particularly in fields associated with accession names within or across PGR passport databases. It offers a suite of functions for data pre-processing, creation of a searchable Key Word in Context (KWIC) index of keywords associated with accession records and the identification of probable duplicate sets by fuzzy, phonetic and semantic matching of keywords. It also has functions to enable the user to review, modify and validate the probable duplicate sets retrieved.</p>
<p>The goal of this document is to introduce the users to these functions and familiarise them with the workflow intended to fetch probable duplicate sets. This document assumes a basic knowledge of <code>R</code> programming language.</p>
<p>The functions in this package are primarily built using the <code>R</code> packages <a href="https://CRAN.R-project.org/package=data.table"><code>data.table</code></a>, <a href="https://CRAN.R-project.org/package=igraph"><code>igraph</code></a>, <a href="https://CRAN.R-project.org/package=stringdist"><code>stringdist</code></a> and <a href="https://CRAN.R-project.org/package=stringi"><code>stringi</code></a>.</p>

<div class="figure">
<img src="imgs/PGRdup.png">
</div>
<p><img src="Introduction_files/figure-html/unnamed-chunk-2-1.png" width="672"></p>
<p><strong>Fig. 1.</strong> PGRdup workflow and associated functions</p>
</div>
<div id="version-history" class="section level2">
<h2 class="hasAnchor">
<a href="#version-history" class="anchor"></a>Version History</h2>
<p>The current version of the package is 0.2.3.2. The previous versions are as follows.</p>
<p><strong>Table 1.</strong> Version history of <code>PGRdup</code> <code>R</code> package.</p>
<table class="table">
<thead><tr class="header">
<th align="left">Version</th>
<th align="left">Date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">0.2</td>
<td align="left">2015-04-14</td>
</tr>
<tr class="even">
<td align="left">0.2.1</td>
<td align="left">2015-07-23</td>
</tr>
<tr class="odd">
<td align="left">0.2.2</td>
<td align="left">2016-03-05</td>
</tr>
<tr class="even">
<td align="left">0.2.2.1</td>
<td align="left">2016-03-09</td>
</tr>
<tr class="odd">
<td align="left">0.2.3</td>
<td align="left">2017-02-01</td>
</tr>
<tr class="even">
<td align="left">0.2.3.1</td>
<td align="left">2017-03-15</td>
</tr>
</tbody>
</table>
<p>To know detailed history of changes use <code>news(package='PGRdup')</code>.</p>

</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The package can be installed using the following functions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Install from CRAN</span>
<span class="kw">install.packages</span>(<span class="st">'PGRdup'</span>, <span class="dt">dependencies=</span><span class="ot">TRUE</span>)</code></pre></div>
<p>Uninstalled dependencies (packages which <code>PGRdup</code> depends on <em>viz</em>- <a href="https://CRAN.R-project.org/package=data.table"><code>data.table</code></a>, <a href="https://CRAN.R-project.org/package=igraph"><code>igraph</code></a>, <a href="https://CRAN.R-project.org/package=stringdist"><code>stringdist</code></a> and <a href="https://CRAN.R-project.org/package=stringi"><code>stringi</code></a> are also installed because of the argument <code>dependencies=TRUE</code>.</p>
<p>Then the package can be loaded using the function</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(PGRdup)</code></pre></div>
</div>
<div id="data-format" class="section level2">
<h2 class="hasAnchor">
<a href="#data-format" class="anchor"></a>Data Format</h2>
<p>The package is essentially designed to operate on PGR passport data present in a <a href="http://google.com/#q=%5BR%5D+data.frame">data frame object</a>, with each row holding one record and columns representing the attribute fields. For example, consider the dataset <code>GN1000</code> supplied along with the package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(PGRdup)</code></pre></div>
<pre><code>
--------------------------------------------------------------------------------
Welcome to PGRdup version 0.2.3.2


# To know how to use this package type:
  browseVignettes(package = 'PGRdup')
  for the package vignette.

# To know whats new in this version type:
  news(package='PGRdup')
  for the NEWS file.

# To cite the methods in the package type:
  citation(package='PGRdup')

# To suppress this message use:
  suppressPackageStartupMessages(library(PGRdup))
--------------------------------------------------------------------------------</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load the dataset to the environment</span>
<span class="kw">data</span>(GN1000)
<span class="co"># Show the class of the object</span>
<span class="kw">class</span>(GN1000)</code></pre></div>
<pre><code>[1] "data.frame"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># View the first few records in the data frame</span>
<span class="kw">head</span>(GN1000)</code></pre></div>
<pre><code>  CommonName    BotanicalName NationalID                CollNo   DonorID
1  Groundnut Arachis hypogaea   EC100277 Shulamith/ NRCG-14555  ICG-4709
2  Groundnut Arachis hypogaea   EC100280                    NC   ICG5288
3  Groundnut Arachis hypogaea   EC100281               MALIMBA   ICG5289
4  Groundnut Arachis hypogaea   EC100713            EC 100713;   ICG5296
5  Groundnut Arachis hypogaea   EC100715             EC 100715   ICG5298
6  Groundnut Arachis hypogaea   EC100716                        ICG-3150
  OtherID1  OtherID2 BioStatus            SourceCountry TransferYear
1           U4-47-12  Landrace                   Israel         2014
2      NCS      NC 5  Landrace United States of America         2004
3          EC 100281  Landrace                   Malawi         2004
4              STARR  Landrace United States of America         2004
5              COMET  Landrace United States of America         2004
6          ARGENTINE  Landrace United States of America         2014</code></pre>
<p>If the passport data exists as an excel sheet, it can be first converted to a comma-separated values (csv) file or tab delimited file and then easily imported into the <code>R</code> environment using the base functions <code>read.csv</code> and <code>read.table</code> respectively. Similarly <code>read_csv()</code> and <code>read_tsv()</code> from the <a href="https://CRAN.R-project.org/package=readr"><code>readr</code></a> package can also be used. Alternatively, the package <a href="https://CRAN.R-project.org/package=readxl"><code>readxl</code></a> can be used to directly read the data from excel. In case of large csv files, the function <code>fread</code> in the <a href="https://CRAN.R-project.org/package=data.table"><code>data.table</code></a> package can be used to rapidly load the data.</p>
<p>If the PGR passport data is in a database management system (DBMS), the required table can be imported as a data frame into <code>R</code>. using the appropriate <a href="http://www.burns-stat.com/r-database-interfaces/"><code>R</code>-database interface package</a>. For example <a href="https://CRAN.R-project.org/package=dbConnect"><code>dbConnect</code></a> for MySQL, <a href="https://CRAN.R-project.org/package=ROracle"><code>ROracle</code></a> for Oracle etc.</p>
<p>The PGR data downloaded from the <a href="https://www.genesys-pgr.org/welcome">genesys</a> database as a <a href="https://github.com/dagendresen/darwincore-germplasm">Darwin Core - Germplasm</a> zip archive can be imported into the <code>R</code> environment as a flat file <code>data.frame</code> using the <code>read.genesys</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Import the DwC-Germplasm zip archive "genesys-accessions-filtered.zip"</span>
PGRgenesys &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read.genesys.html">read.genesys</a></span>(<span class="st">"genesys-accessions-filtered.zip"</span>,
                           <span class="dt">scrub.names.space =</span> <span class="ot">TRUE</span>, <span class="dt">readme =</span> <span class="ot">TRUE</span>)</code></pre></div>
</div>
<div id="data-pre-processing" class="section level2">
<h2 class="hasAnchor">
<a href="#data-pre-processing" class="anchor"></a>Data Pre-processing</h2>
<p>Data pre-processing is a critical step which can affect the quality of the probable duplicate sets being retrieved. It involves data standardization as well as data cleaning which can be achieved using the functions <code>DataClean</code>, <code>MergeKW</code>, <code>MergePrefix</code> and <code>MergeSuffix</code>.</p>
<p><code>DataClean</code> function can be used to clean the character strings in passport data fields(columns) specified as the input <a href="http://google.com/#q=%5BR%5D+character+vector">character vector</a> <code>x</code> according to the conditions specified in the arguments.</p>
<p>Commas, semicolons and colons which are sometimes used to separate multiple strings or names within the same field can be replaced with a single space using the logical arguments <code>fix.comma</code>, <code>fix.semcol</code> and <code>fix.col</code> respectively.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"A 14; EC 1697"</span>, <span class="st">"U 4-4-28; EC 21078; A 32"</span>, <span class="st">"PI 262801:CIAT 9075:GKP 9553/90"</span>,
       <span class="st">"NCAC 16049, PI 261987, RCM 493-3"</span>)
x</code></pre></div>
<pre><code>[1] "A 14; EC 1697"                    "U 4-4-28; EC 21078; A 32"        
[3] "PI 262801:CIAT 9075:GKP 9553/90"  "NCAC 16049, PI 261987, RCM 493-3"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Replace ',', ':' and ';' with space</span>
<span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(x, <span class="dt">fix.comma=</span><span class="ot">TRUE</span>, <span class="dt">fix.semcol=</span><span class="ot">TRUE</span>, <span class="dt">fix.col=</span><span class="ot">TRUE</span>,
          <span class="dt">fix.bracket=</span><span class="ot">FALSE</span>, <span class="dt">fix.punct=</span><span class="ot">FALSE</span>, <span class="dt">fix.space=</span><span class="ot">FALSE</span>, <span class="dt">fix.sep=</span><span class="ot">FALSE</span>,
          <span class="dt">fix.leadzero=</span><span class="ot">FALSE</span>)</code></pre></div>
<pre><code>[1] "A 14  EC 1697"                    "U 4-4-28  EC 21078  A 32"        
[3] "PI 262801 CIAT 9075 GKP 9553/90"  "NCAC 16049  PI 261987  RCM 493-3"</code></pre>
<p>Similarly the logical argument <code>fix.bracket</code> can be used to replace all brackets including parenthesis, square brackets and curly brackets with space.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"(NRCG-1738)/(NFG649)"</span>, <span class="st">"26-5-1[NRCG-2528]"</span>, <span class="st">"Ah 1182 {NRCG-4340}"</span>)
x</code></pre></div>
<pre><code>[1] "(NRCG-1738)/(NFG649)" "26-5-1[NRCG-2528]"    "Ah 1182 {NRCG-4340}" </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Replace parenthesis, square brackets and curly brackets with space</span>
<span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(x, <span class="dt">fix.comma=</span><span class="ot">FALSE</span>, <span class="dt">fix.semcol=</span><span class="ot">FALSE</span>, <span class="dt">fix.col=</span><span class="ot">FALSE</span>,
          <span class="dt">fix.bracket=</span><span class="ot">TRUE</span>,
          <span class="dt">fix.punct=</span><span class="ot">FALSE</span>, <span class="dt">fix.space=</span><span class="ot">FALSE</span>, <span class="dt">fix.sep=</span><span class="ot">FALSE</span>, <span class="dt">fix.leadzero=</span><span class="ot">FALSE</span>)</code></pre></div>
<pre><code>[1] "NRCG-1738 / NFG649" "26-5-1 NRCG-2528"   "AH 1182  NRCG-4340"</code></pre>
<p>The logical argument <code>fix.punct</code> can be used to remove all punctuation from the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"#26-6-3-1"</span>, <span class="st">"Culture No. 857"</span>, <span class="st">"U/4/47/13"</span>)
x</code></pre></div>
<pre><code>[1] "#26-6-3-1"       "Culture No. 857" "U/4/47/13"      </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Remove punctuation</span>
<span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(x, <span class="dt">fix.comma=</span><span class="ot">FALSE</span>, <span class="dt">fix.semcol=</span><span class="ot">FALSE</span>, <span class="dt">fix.col=</span><span class="ot">FALSE</span>, <span class="dt">fix.bracket=</span><span class="ot">FALSE</span>,
          <span class="dt">fix.punct=</span><span class="ot">TRUE</span>,
          <span class="dt">fix.space=</span><span class="ot">FALSE</span>, <span class="dt">fix.sep=</span><span class="ot">FALSE</span>, <span class="dt">fix.leadzero=</span><span class="ot">FALSE</span>)</code></pre></div>
<pre><code>[1] "26631"          "CULTURE NO 857" "U44713"        </code></pre>
<p><code>fix.space</code> can be used to convert all space characters such as tab, newline, vertical tab, form feed and carriage return to spaces and finally convert multiple spaces to single space.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"RS   1"</span>, <span class="st">"GKSPScGb 208  PI 475855"</span>)
x</code></pre></div>
<pre><code>[1] "RS   1"                  "GKSPScGb 208  PI 475855"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Replace all space characters to space and convert multiple spaces to single space</span>
<span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(x, <span class="dt">fix.comma=</span><span class="ot">FALSE</span>, <span class="dt">fix.semcol=</span><span class="ot">FALSE</span>, <span class="dt">fix.col=</span><span class="ot">FALSE</span>,
          <span class="dt">fix.bracket=</span><span class="ot">FALSE</span>, <span class="dt">fix.punct=</span><span class="ot">FALSE</span>,
          <span class="dt">fix.space=</span><span class="ot">TRUE</span>,
          <span class="dt">fix.sep=</span><span class="ot">FALSE</span>, <span class="dt">fix.leadzero=</span><span class="ot">FALSE</span>)</code></pre></div>
<pre><code>[1] "RS 1"                   "GKSPSCGB 208 PI 475855"</code></pre>
<p><code>fix.sep</code> can be used to merge together accession identifiers composed of alphabetic characters separated from a series of digits by a space character.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"NCAC 18078"</span>, <span class="st">"AH 6481"</span>, <span class="st">"ICG 2791"</span>)
x</code></pre></div>
<pre><code>[1] "NCAC 18078" "AH 6481"    "ICG 2791"  </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Merge alphabetic character separated from a series of digits by a space</span>
<span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(x, <span class="dt">fix.comma=</span><span class="ot">FALSE</span>, <span class="dt">fix.semcol=</span><span class="ot">FALSE</span>, <span class="dt">fix.col=</span><span class="ot">FALSE</span>,
          <span class="dt">fix.bracket=</span><span class="ot">FALSE</span>, <span class="dt">fix.punct=</span><span class="ot">FALSE</span>, <span class="dt">fix.space=</span><span class="ot">FALSE</span>,
          <span class="dt">fix.sep=</span><span class="ot">TRUE</span>,
          <span class="dt">fix.leadzero=</span><span class="ot">FALSE</span>)</code></pre></div>
<pre><code>[1] "NCAC18078" "AH6481"    "ICG2791"  </code></pre>
<p><code>fix.leadzero</code> can be used to remove leading zeros from accession name fields to facilitate matching to identify probable duplicates.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"EC 0016664"</span>, <span class="st">"EC0001690"</span>)
x</code></pre></div>
<pre><code>[1] "EC 0016664" "EC0001690" </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Remove leading zeros</span>
<span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(x, <span class="dt">fix.comma=</span><span class="ot">FALSE</span>, <span class="dt">fix.semcol=</span><span class="ot">FALSE</span>, <span class="dt">fix.col=</span><span class="ot">FALSE</span>,
          <span class="dt">fix.bracket=</span><span class="ot">FALSE</span>, <span class="dt">fix.punct=</span><span class="ot">FALSE</span>, <span class="dt">fix.space=</span><span class="ot">FALSE</span>, <span class="dt">fix.sep=</span><span class="ot">FALSE</span>,
          <span class="dt">fix.leadzero=</span><span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] "EC 16664" "EC1690"  </code></pre>
<p>This function can hence be made use of in tidying up multiple forms of messy data existing in fields associated with accession names in PGR passport databases (Table 1).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"S7-12-6"</span>, <span class="st">"ICG-3505"</span>, <span class="st">"U 4-47-18;EC 21127"</span>, <span class="st">"AH 6481"</span>, <span class="st">"RS   1"</span>,
           <span class="st">"AK 12-24"</span>, <span class="st">"2-5 (NRCG-4053)"</span>, <span class="st">"T78, Mwitunde"</span>, <span class="st">"ICG 3410"</span>,
           <span class="st">"#648-4 (Gwalior)"</span>, <span class="st">"TG4;U/4/47/13"</span>, <span class="st">"EC0021003"</span>)
names</code></pre></div>
<pre><code> [1] "S7-12-6"            "ICG-3505"           "U 4-47-18;EC 21127"
 [4] "AH 6481"            "RS   1"             "AK 12-24"          
 [7] "2-5 (NRCG-4053)"    "T78, Mwitunde"      "ICG 3410"          
[10] "#648-4 (Gwalior)"   "TG4;U/4/47/13"      "EC0021003"         </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Clean the data</span>
<span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(names)</code></pre></div>
<pre><code> [1] "S7126"          "ICG3505"        "U44718 EC21127" "AH6481"        
 [5] "RS1"            "AK1224"         "25 NRCG4053"    "T78 MWITUNDE"  
 [9] "ICG3410"        "6484 GWALIOR"   "TG4 U44713"     "EC21003"       </code></pre>
<p><strong>Table 2.</strong> Data pre-processing using <code>DataClean</code>.</p>
<table class="table">
<thead><tr class="header">
<th align="left"><strong>names</strong></th>
<th align="left"><strong>DataClean(names)</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">S7-12-6</td>
<td align="left">S7126</td>
</tr>
<tr class="even">
<td align="left">ICG-3505</td>
<td align="left">ICG3505</td>
</tr>
<tr class="odd">
<td align="left">U 4-47-18;EC 21127</td>
<td align="left">U44718 EC21127</td>
</tr>
<tr class="even">
<td align="left">AH 6481</td>
<td align="left">AH6481</td>
</tr>
<tr class="odd">
<td align="left">RS 1</td>
<td align="left">RS1</td>
</tr>
<tr class="even">
<td align="left">AK 12-24</td>
<td align="left">AK1224</td>
</tr>
<tr class="odd">
<td align="left">2-5 (NRCG-4053)</td>
<td align="left">25 NRCG4053</td>
</tr>
<tr class="even">
<td align="left">T78, Mwitunde</td>
<td align="left">T78 MWITUNDE</td>
</tr>
<tr class="odd">
<td align="left">ICG 3410</td>
<td align="left">ICG3410</td>
</tr>
<tr class="even">
<td align="left">#648-4 (Gwalior)</td>
<td align="left">6484 GWALIOR</td>
</tr>
<tr class="odd">
<td align="left">TG4;U/4/47/13</td>
<td align="left">TG4 U44713</td>
</tr>
<tr class="even">
<td align="left">EC0021003</td>
<td align="left">EC21003</td>
</tr>
</tbody>
</table>
<p>Several common keyword string pairs or keyword prefixes and suffixes exist in fields associated with accession names in PGR passport databases. They can be merged using the functions <code>MergeKW</code>, <code>MergePrefix</code> and <code>MergeSuffix</code> respectively. The keyword string pairs, prefixes and suffixes can be supplied as a <a href="http://google.com/#q=%5BR%5D+list">list</a> or a <a href="http://google.com/#q=%5BR%5D+vector">vector</a> to the argument <code>y</code> in these functions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Punjab Bold"</span>, <span class="st">"Gujarat- Dwarf"</span>, <span class="st">"Nagpur.local"</span>, <span class="st">"SAM COL 144"</span>,
           <span class="st">"SAM COL--280"</span>, <span class="st">"NIZAMABAD-LOCAL"</span>, <span class="st">"Dark Green Mutant"</span>,
           <span class="st">"Dixie-Giant"</span>, <span class="st">"Georgia- Bunch"</span>, <span class="st">"Uganda-erect"</span>, <span class="st">"Small Japan"</span>,
           <span class="st">"Castle  Cary"</span>, <span class="st">"Punjab erect"</span>, <span class="st">"Improved small japan"</span>,
           <span class="st">"Dark Purple"</span>)
names</code></pre></div>
<pre><code> [1] "Punjab Bold"          "Gujarat- Dwarf"       "Nagpur.local"        
 [4] "SAM COL 144"          "SAM COL--280"         "NIZAMABAD-LOCAL"     
 [7] "Dark Green Mutant"    "Dixie-Giant"          "Georgia- Bunch"      
[10] "Uganda-erect"         "Small Japan"          "Castle  Cary"        
[13] "Punjab erect"         "Improved small japan" "Dark Purple"         </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Merge pairs of strings</span>
y1 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">"Gujarat"</span>, <span class="st">"Dwarf"</span>), <span class="kw">c</span>(<span class="st">"Castle"</span>, <span class="st">"Cary"</span>), <span class="kw">c</span>(<span class="st">"Small"</span>, <span class="st">"Japan"</span>),
           <span class="kw">c</span>(<span class="st">"Big"</span>, <span class="st">"Japan"</span>), <span class="kw">c</span>(<span class="st">"Mani"</span>, <span class="st">"Blanco"</span>), <span class="kw">c</span>(<span class="st">"Uganda"</span>, <span class="st">"Erect"</span>),
           <span class="kw">c</span>(<span class="st">"Mota"</span>, <span class="st">"Company"</span>))
names &lt;-<span class="st"> </span><span class="kw"><a href="../reference/MergeKW.html">MergeKW</a></span>(names, y1, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>, <span class="st">"period"</span>))

<span class="co"># Merge prefix strings</span>
y2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Light"</span>, <span class="st">"Small"</span>, <span class="st">"Improved"</span>, <span class="st">"Punjab"</span>, <span class="st">"SAM"</span>, <span class="st">"Dark"</span>)
names &lt;-<span class="st"> </span><span class="kw"><a href="../reference/MergeKW.html">MergePrefix</a></span>(names, y2, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>, <span class="st">"period"</span>))

<span class="co"># Merge suffix strings</span>
y3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Local"</span>, <span class="st">"Bold"</span>, <span class="st">"Cary"</span>, <span class="st">"Mutant"</span>, <span class="st">"Runner"</span>, <span class="st">"Giant"</span>, <span class="st">"No."</span>,
        <span class="st">"Bunch"</span>, <span class="st">"Peanut"</span>)
names &lt;-<span class="st"> </span><span class="kw"><a href="../reference/MergeKW.html">MergeSuffix</a></span>(names, y3, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>, <span class="st">"period"</span>))

names</code></pre></div>
<pre><code> [1] "PunjabBold"         "GujaratDwarf"       "Nagpurlocal"       
 [4] "SAMCOL 144"         "SAMCOL--280"        "NIZAMABADLOCAL"    
 [7] "DarkGreenMutant"    "DixieGiant"         "GeorgiaBunch"      
[10] "Ugandaerect"        "SmallJapan"         "CastleCary"        
[13] "Punjaberect"        "Improvedsmalljapan" "DarkPurple"        </code></pre>
<p>These functions can be applied over multiple columns(fields) in a data frame using the <a href="http://google.com/#q=%5BR%5D+lapply"><code>lapply</code></a> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load example dataset</span>
GN &lt;-<span class="st"> </span>GN1000

<span class="co"># Specify as a vector the database fields to be used</span>
GNfields &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"NationalID"</span>, <span class="st">"CollNo"</span>, <span class="st">"DonorID"</span>, <span class="st">"OtherID1"</span>, <span class="st">"OtherID2"</span>)
<span class="kw">head</span>(GN[GNfields])</code></pre></div>
<pre><code>  NationalID                CollNo   DonorID OtherID1  OtherID2
1   EC100277 Shulamith/ NRCG-14555  ICG-4709           U4-47-12
2   EC100280                    NC   ICG5288      NCS      NC 5
3   EC100281               MALIMBA   ICG5289          EC 100281
4   EC100713            EC 100713;   ICG5296              STARR
5   EC100715             EC 100715   ICG5298              COMET
6   EC100716                        ICG-3150          ARGENTINE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Clean the data</span>
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields], <span class="cf">function</span>(x) <span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(x))
y1 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">"Gujarat"</span>, <span class="st">"Dwarf"</span>), <span class="kw">c</span>(<span class="st">"Castle"</span>, <span class="st">"Cary"</span>), <span class="kw">c</span>(<span class="st">"Small"</span>, <span class="st">"Japan"</span>),
<span class="kw">c</span>(<span class="st">"Big"</span>, <span class="st">"Japan"</span>), <span class="kw">c</span>(<span class="st">"Mani"</span>, <span class="st">"Blanco"</span>), <span class="kw">c</span>(<span class="st">"Uganda"</span>, <span class="st">"Erect"</span>),
<span class="kw">c</span>(<span class="st">"Mota"</span>, <span class="st">"Company"</span>))
y2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Dark"</span>, <span class="st">"Light"</span>, <span class="st">"Small"</span>, <span class="st">"Improved"</span>, <span class="st">"Punjab"</span>, <span class="st">"SAM"</span>)
y3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Local"</span>, <span class="st">"Bold"</span>, <span class="st">"Cary"</span>, <span class="st">"Mutant"</span>, <span class="st">"Runner"</span>, <span class="st">"Giant"</span>, <span class="st">"No."</span>,
        <span class="st">"Bunch"</span>, <span class="st">"Peanut"</span>)
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeKW</a></span>(x, y1, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergePrefix</a></span>(x, y2, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeSuffix</a></span>(x, y3, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
<span class="kw">head</span>(GN[GNfields])</code></pre></div>
<pre><code>  NationalID              CollNo DonorID OtherID1  OtherID2
1   EC100277 SHULAMITH NRCG14555 ICG4709             U44712
2   EC100280                  NC ICG5288      NCS       NC5
3   EC100281             MALIMBA ICG5289           EC100281
4   EC100713            EC100713 ICG5296              STARR
5   EC100715            EC100715 ICG5298              COMET
6   EC100716                     ICG3150          ARGENTINE</code></pre>
</div>
<div id="generation-of-kwic-index" class="section level2">
<h2 class="hasAnchor">
<a href="#generation-of-kwic-index" class="anchor"></a>Generation of KWIC Index</h2>
<p>The function <code>KWIC</code> generates a Key Word in Context index <span class="citation">(Knüpffer 1988; Knüpffer, Frese, and Jongen 1997)</span> from the data frame of a PGR passport database based on the fields(columns) specified in the argument <code>fields</code> along with the keyword frequencies and gives the output as a list of class <code>KWIC</code>. The first element of the vector specified in <code>fields</code> is considered as the primary key or identifier which uniquely identifies all rows in the data frame.</p>
<p>This function fetches keywords from different fields specified, which can be subsequently used for matching to identify probable duplicates. The frequencies of the keywords retrieved can help in determining if further data pre-processing is required and also to decide whether any common keywords can be exempted from matching (Fig. 2).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load example dataset</span>
GN &lt;-<span class="st"> </span>GN1000

<span class="co"># Specify as a vector the database fields to be used</span>
GNfields &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"NationalID"</span>, <span class="st">"CollNo"</span>, <span class="st">"DonorID"</span>, <span class="st">"OtherID1"</span>, <span class="st">"OtherID2"</span>)

<span class="co"># Clean the data</span>
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields], <span class="cf">function</span>(x) <span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(x))
y1 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">"Gujarat"</span>, <span class="st">"Dwarf"</span>), <span class="kw">c</span>(<span class="st">"Castle"</span>, <span class="st">"Cary"</span>), <span class="kw">c</span>(<span class="st">"Small"</span>, <span class="st">"Japan"</span>),
<span class="kw">c</span>(<span class="st">"Big"</span>, <span class="st">"Japan"</span>), <span class="kw">c</span>(<span class="st">"Mani"</span>, <span class="st">"Blanco"</span>), <span class="kw">c</span>(<span class="st">"Uganda"</span>, <span class="st">"Erect"</span>),
<span class="kw">c</span>(<span class="st">"Mota"</span>, <span class="st">"Company"</span>))
y2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Dark"</span>, <span class="st">"Light"</span>, <span class="st">"Small"</span>, <span class="st">"Improved"</span>, <span class="st">"Punjab"</span>, <span class="st">"SAM"</span>)
y3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Local"</span>, <span class="st">"Bold"</span>, <span class="st">"Cary"</span>, <span class="st">"Mutant"</span>, <span class="st">"Runner"</span>, <span class="st">"Giant"</span>, <span class="st">"No."</span>,
        <span class="st">"Bunch"</span>, <span class="st">"Peanut"</span>)
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeKW</a></span>(x, y1, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergePrefix</a></span>(x, y2, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeSuffix</a></span>(x, y3, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))

<span class="co"># Generate the KWIC index</span>
GNKWIC &lt;-<span class="st"> </span><span class="kw"><a href="../reference/KWIC.html">KWIC</a></span>(GN, GNfields, <span class="dt">min.freq =</span> <span class="dv">1</span>)
<span class="kw">class</span>(GNKWIC)</code></pre></div>
<pre><code>[1] "KWIC"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNKWIC</code></pre></div>
<pre><code>KWIC fields : NationalID CollNo DonorID OtherID1 OtherID2
Number of keywords : 3893
Number of distinct keywords : 3109</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Retrieve the KWIC index from the KWIC object</span>
KWIC &lt;-<span class="st"> </span>GNKWIC[[<span class="dv">1</span>]]
KWIC &lt;-<span class="st"> </span>KWIC[<span class="kw">order</span>(KWIC<span class="op">$</span>KEYWORD, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>),]
<span class="kw">head</span>(KWIC[,<span class="kw">c</span>(<span class="st">"PRIM_ID"</span>, <span class="st">"KWIC_L"</span>, <span class="st">"KWIC_KW"</span>, <span class="st">"KWIC_R"</span>)], <span class="dt">n =</span> <span class="dv">10</span>)</code></pre></div>
<pre><code>      PRIM_ID                                     KWIC_L  KWIC_KW
550  EC490380            EC490380 =  = ICG1122 =  = LIN      YUCH
435   EC36893                                 EC36893 =      YUAN
434   EC36893                            EC36893 = YUAN     YOUNG
1287 EC613524       EC613524 = NRCG9225 =  = PEI KANGPE    YOUDON
1703 IC113088                       IC113088 =  =  = SB        XI
1741 IC296965 IC296965 = SB X11 X V11 = ICG1769 =  = SB        XI
3385 IC445197                                IC445197 =   X144B28
3483 IC494754                IC494754 =  = ICG7686 =  =   X144B28
2090 IC304018    IC304018 = 144B19B NRCG = ICG1561 =  =  X144B19B
1735 IC296965                             IC296965 = SB       X11
                                KWIC_R
550                               TSAO
435   YOUNG TOU = ICG5241 =  = EC36893
434         TOU = ICG5241 =  = EC36893
1287                                 =
1703                        = IC305003
1741                             X VII
3385           B = ICG2113 =  = LIMDI4
3483                                 B
2090                                  
1735  X V11 = ICG1769 =  = SB XI X VII</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Retrieve the keyword frequencies from the KWIC object</span>
KeywordFreq &lt;-<span class="st"> </span>GNKWIC[[<span class="dv">2</span>]]
<span class="kw">head</span>(KeywordFreq)</code></pre></div>
<pre><code>  Keyword Freq
1   OVERO   25
2      S1   19
3       A   11
4     RED   11
5    OVER   10
6  PURPLE   10</code></pre>
<p><img src="Introduction_files/figure-html/unnamed-chunk-19-1.png" width="672"></p>
<p><strong>Fig. 2.</strong> Word cloud of keywords retrieved</p>
<p>The function will throw an error in case of duplicates or NULL values in the primary key/ID field mentioned.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GN &lt;-<span class="st"> </span>GN1000
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields], <span class="cf">function</span>(x) <span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(x))
<span class="co"># Generate dummy duplicates for illustration</span>
GN[<span class="dv">1001</span><span class="op">:</span><span class="dv">1005</span>,] &lt;-<span class="st"> </span>GN[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>,]
<span class="co"># Generate dummy NULL values for illustration</span>
GN[<span class="dv">1001</span>,<span class="dv">3</span>] &lt;-<span class="st"> ""</span>
GN[<span class="dv">1002</span>,<span class="dv">3</span>] &lt;-<span class="st"> ""</span>
GN[<span class="dv">1001</span><span class="op">:</span><span class="dv">1005</span>,]</code></pre></div>
<pre><code>     CommonName    BotanicalName NationalID              CollNo DonorID
1001  Groundnut Arachis hypogaea            SHULAMITH NRCG14555 ICG4709
1002  Groundnut Arachis hypogaea                             NC ICG5288
1003  Groundnut Arachis hypogaea   EC100281             MALIMBA ICG5289
1004  Groundnut Arachis hypogaea   EC100713            EC100713 ICG5296
1005  Groundnut Arachis hypogaea   EC100715            EC100715 ICG5298
     OtherID1 OtherID2 BioStatus            SourceCountry TransferYear
1001            U44712  Landrace                   Israel         2014
1002      NCS      NC5  Landrace United States of America         2004
1003          EC100281  Landrace                   Malawi         2004
1004             STARR  Landrace United States of America         2004
1005             COMET  Landrace United States of America         2004</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNKWIC &lt;-<span class="st"> </span><span class="kw"><a href="../reference/KWIC.html">KWIC</a></span>(GN, GNfields, <span class="dt">min.freq=</span><span class="dv">1</span>)</code></pre></div>
<pre><code>Error in KWIC(GN, GNfields, min.freq = 1) :
  Primary key/ID field should be unique and not NULL
 Use PGRdup::ValidatePrimKey() to identify and rectify the aberrant records first</code></pre>
<p>The erroneous records can be identified using the helper function <code>ValidatePrimKey</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Validate the primary key/ID field for duplication or existence of NULL values</span>
<span class="kw"><a href="../reference/ValidatePrimKey.html">ValidatePrimKey</a></span>(<span class="dt">x =</span> GN, <span class="dt">prim.key =</span> <span class="st">"NationalID"</span>)</code></pre></div>
<pre><code>$message1
[1] "ERROR: Duplicated records found in prim.key field"

$Duplicates
     CommonName    BotanicalName NationalID              CollNo DonorID
1001  Groundnut Arachis hypogaea            SHULAMITH NRCG14555 ICG4709
1002  Groundnut Arachis hypogaea                             NC ICG5288
3     Groundnut Arachis hypogaea   EC100281             MALIMBA ICG5289
1003  Groundnut Arachis hypogaea   EC100281             MALIMBA ICG5289
4     Groundnut Arachis hypogaea   EC100713            EC100713 ICG5296
1004  Groundnut Arachis hypogaea   EC100713            EC100713 ICG5296
5     Groundnut Arachis hypogaea   EC100715            EC100715 ICG5298
1005  Groundnut Arachis hypogaea   EC100715            EC100715 ICG5298
     OtherID1 OtherID2 BioStatus            SourceCountry TransferYear
1001            U44712  Landrace                   Israel         2014
1002      NCS      NC5  Landrace United States of America         2004
3             EC100281  Landrace                   Malawi         2004
1003          EC100281  Landrace                   Malawi         2004
4                STARR  Landrace United States of America         2004
1004             STARR  Landrace United States of America         2004
5                COMET  Landrace United States of America         2004
1005             COMET  Landrace United States of America         2004

$message2
[1] "ERROR: NULL records found in prim.key field"

$NullRecords
     CommonName    BotanicalName NationalID              CollNo DonorID
1001  Groundnut Arachis hypogaea            SHULAMITH NRCG14555 ICG4709
1002  Groundnut Arachis hypogaea                             NC ICG5288
     OtherID1 OtherID2 BioStatus            SourceCountry TransferYear
1001            U44712  Landrace                   Israel         2014
1002      NCS      NC5  Landrace United States of America         2004
     primdup
1001    TRUE
1002    TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Remove the offending records</span>
GN &lt;-<span class="st"> </span>GN[<span class="op">-</span><span class="kw">c</span>(<span class="dv">1001</span><span class="op">:</span><span class="dv">1005</span>), ]
<span class="co"># Validate again</span>
<span class="kw"><a href="../reference/ValidatePrimKey.html">ValidatePrimKey</a></span>(<span class="dt">x =</span> GN, <span class="dt">prim.key =</span> <span class="st">"NationalID"</span>)</code></pre></div>
<pre><code>$message1
[1] "OK: No duplicated records found in prim.key field"

$Duplicates
NULL

$message2
[1] "OK: No NULL records found in prim.key field"

$NullRecords
NULL</code></pre>
</div>
<div id="retrieval-of-probable-duplicate-sets" class="section level2">
<h2 class="hasAnchor">
<a href="#retrieval-of-probable-duplicate-sets" class="anchor"></a>Retrieval of Probable Duplicate Sets</h2>
<p>Once KWIC indexes are generated, probable duplicates of germplasm accessions can be identified by fuzzy, phonetic and semantic matching of the associated keywords using the function <code>ProbDup</code>. The sets are retrieved as a list of data frames of class <code>ProbDup</code>.</p>
<p>Keywords that are not to be used for matching can be specified as a vector in the <code>excep</code> argument.</p>
<div id="methods" class="section level3">
<h3 class="hasAnchor">
<a href="#methods" class="anchor"></a>Methods</h3>
<p>The function can execute matching according to either one of the following three methods as specified by the <code>method</code> argument.</p>
<ol style="list-style-type: decimal">
<li>
<strong>Method <code>"a"</code></strong> : Performs string matching of keywords in a single KWIC index to identify probable duplicates of accessions in a single PGR passport database.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load example dataset</span>
GN &lt;-<span class="st"> </span>GN1000

<span class="co"># Specify as a vector the database fields to be used</span>
GNfields &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"NationalID"</span>, <span class="st">"CollNo"</span>, <span class="st">"DonorID"</span>, <span class="st">"OtherID1"</span>, <span class="st">"OtherID2"</span>)

<span class="co"># Clean the data</span>
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields], <span class="cf">function</span>(x) <span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(x))
y1 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">"Gujarat"</span>, <span class="st">"Dwarf"</span>), <span class="kw">c</span>(<span class="st">"Castle"</span>, <span class="st">"Cary"</span>), <span class="kw">c</span>(<span class="st">"Small"</span>, <span class="st">"Japan"</span>),
<span class="kw">c</span>(<span class="st">"Big"</span>, <span class="st">"Japan"</span>), <span class="kw">c</span>(<span class="st">"Mani"</span>, <span class="st">"Blanco"</span>), <span class="kw">c</span>(<span class="st">"Uganda"</span>, <span class="st">"Erect"</span>),
<span class="kw">c</span>(<span class="st">"Mota"</span>, <span class="st">"Company"</span>))
y2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Dark"</span>, <span class="st">"Light"</span>, <span class="st">"Small"</span>, <span class="st">"Improved"</span>, <span class="st">"Punjab"</span>, <span class="st">"SAM"</span>)
y3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Local"</span>, <span class="st">"Bold"</span>, <span class="st">"Cary"</span>, <span class="st">"Mutant"</span>, <span class="st">"Runner"</span>, <span class="st">"Giant"</span>, <span class="st">"No."</span>,
        <span class="st">"Bunch"</span>, <span class="st">"Peanut"</span>)
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeKW</a></span>(x, y1, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergePrefix</a></span>(x, y2, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeSuffix</a></span>(x, y3, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))

<span class="co"># Generate the KWIC index</span>
GNKWIC &lt;-<span class="st"> </span><span class="kw"><a href="../reference/KWIC.html">KWIC</a></span>(GN, GNfields)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Specify the exceptions as a vector</span>
exep &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"BIG"</span>, <span class="st">"BOLD"</span>, <span class="st">"BUNCH"</span>, <span class="st">"C"</span>, <span class="st">"COMPANY"</span>, <span class="st">"CULTURE"</span>,
         <span class="st">"DARK"</span>, <span class="st">"E"</span>, <span class="st">"EARLY"</span>, <span class="st">"EC"</span>, <span class="st">"ERECT"</span>, <span class="st">"EXOTIC"</span>, <span class="st">"FLESH"</span>, <span class="st">"GROUNDNUT"</span>,
         <span class="st">"GUTHUKAI"</span>, <span class="st">"IMPROVED"</span>, <span class="st">"K"</span>, <span class="st">"KUTHUKADAL"</span>, <span class="st">"KUTHUKAI"</span>, <span class="st">"LARGE"</span>,
         <span class="st">"LIGHT"</span>, <span class="st">"LOCAL"</span>, <span class="st">"OF"</span>, <span class="st">"OVERO"</span>, <span class="st">"P"</span>, <span class="st">"PEANUT"</span>, <span class="st">"PURPLE"</span>, <span class="st">"R"</span>,
         <span class="st">"RED"</span>, <span class="st">"RUNNER"</span>, <span class="st">"S1"</span>, <span class="st">"SAM"</span>, <span class="st">"SMALL"</span>, <span class="st">"SPANISH"</span>, <span class="st">"TAN"</span>, <span class="st">"TYPE"</span>,
         <span class="st">"U"</span>, <span class="st">"VALENCIA"</span>, <span class="st">"VIRGINIA"</span>, <span class="st">"WHITE"</span>)

<span class="co"># Fetch fuzzy duplicates by method 'a'</span>
GNdup &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ProbDup.html">ProbDup</a></span>(<span class="dt">kwic1 =</span> GNKWIC, <span class="dt">method =</span> <span class="st">"a"</span>, <span class="dt">excep =</span> exep, <span class="dt">fuzzy =</span> <span class="ot">TRUE</span>,
                 <span class="dt">phonetic =</span> <span class="ot">FALSE</span>, <span class="dt">semantic =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>Fuzzy matching</code></pre>
<pre><code>
  |                                                                       
  |================                                                 |  25%
Block 1 / 4 |
  |                                                                       
  |================================                                 |  50%
Block 2 / 4 |
  |                                                                       
  |=================================================                |  75%
Block 3 / 4 |
  |                                                                       
  |=================================================================| 100%
Block 4 / 4 |</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(GNdup)</code></pre></div>
<pre><code>[1] "ProbDup"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdup</code></pre></div>
<pre><code>Method : a

KWIC1 fields : NationalID CollNo DonorID OtherID1 OtherID2
 
                No..of.Sets    No..of.Records
FuzzyDuplicates         378               745
Total                   378 745(Distinct:745)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Fetch phonetic duplicates by method 'a'</span>
GNdup &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ProbDup.html">ProbDup</a></span>(<span class="dt">kwic1 =</span> GNKWIC, <span class="dt">method =</span> <span class="st">"a"</span>, <span class="dt">excep =</span> exep, <span class="dt">fuzzy =</span> <span class="ot">FALSE</span>,
                 <span class="dt">phonetic =</span> <span class="ot">TRUE</span>, <span class="dt">semantic =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>Phonetic matching</code></pre>
<pre><code>
  |                                                                       
  |================                                                 |  25%
Block 1 / 4 |
  |                                                                       
  |================================                                 |  50%
Block 2 / 4 |
  |                                                                       
  |=================================================                |  75%
Block 3 / 4 |
  |                                                                       
  |=================================================================| 100%
Block 4 / 4 |</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(GNdup)</code></pre></div>
<pre><code>[1] "ProbDup"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdup</code></pre></div>
<pre><code>Method : a

KWIC1 fields : NationalID CollNo DonorID OtherID1 OtherID2
 
                   No..of.Sets    No..of.Records
PhoneticDuplicates          99               260
Total                       99 260(Distinct:260)</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><p><strong>Method <code>"b"</code></strong> : Performs string matching of keywords in the first KWIC index (query) with that of the keywords in the second index (source) to identify probable duplicates of accessions of the first PGR passport database among the accessions in the second database.</p></li>
<li><p><strong>Method <code>"c"</code></strong> : Performs string matching of keywords in two different KWIC indexes jointly to identify probable duplicates of accessions from among two PGR passport databases.</p></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load PGR passport databases</span>
GN1 &lt;-<span class="st"> </span>GN1000[<span class="op">!</span><span class="kw">grepl</span>(<span class="st">"^ICG"</span>, GN1000<span class="op">$</span>DonorID), ]
GN1<span class="op">$</span>DonorID &lt;-<span class="st"> </span><span class="ot">NULL</span>
GN2 &lt;-<span class="st"> </span>GN1000[<span class="kw">grepl</span>(<span class="st">"^ICG"</span>, GN1000<span class="op">$</span>DonorID), ]
GN2<span class="op">$</span>NationalID &lt;-<span class="st"> </span><span class="ot">NULL</span>

<span class="co"># Specify database fields to use</span>
GN1fields &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"NationalID"</span>, <span class="st">"CollNo"</span>, <span class="st">"OtherID1"</span>, <span class="st">"OtherID2"</span>)
GN2fields &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"DonorID"</span>, <span class="st">"CollNo"</span>, <span class="st">"OtherID1"</span>, <span class="st">"OtherID2"</span>)

<span class="co"># Clean the data</span>
GN1[GN1fields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN1[GN1fields], <span class="cf">function</span>(x) <span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(x))
GN2[GN2fields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN2[GN2fields], <span class="cf">function</span>(x) <span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(x))
y1 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">"Gujarat"</span>, <span class="st">"Dwarf"</span>), <span class="kw">c</span>(<span class="st">"Castle"</span>, <span class="st">"Cary"</span>), <span class="kw">c</span>(<span class="st">"Small"</span>, <span class="st">"Japan"</span>),
<span class="kw">c</span>(<span class="st">"Big"</span>, <span class="st">"Japan"</span>), <span class="kw">c</span>(<span class="st">"Mani"</span>, <span class="st">"Blanco"</span>), <span class="kw">c</span>(<span class="st">"Uganda"</span>, <span class="st">"Erect"</span>),
<span class="kw">c</span>(<span class="st">"Mota"</span>, <span class="st">"Company"</span>))
y2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Dark"</span>, <span class="st">"Light"</span>, <span class="st">"Small"</span>, <span class="st">"Improved"</span>, <span class="st">"Punjab"</span>, <span class="st">"SAM"</span>)
y3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Local"</span>, <span class="st">"Bold"</span>, <span class="st">"Cary"</span>, <span class="st">"Mutant"</span>, <span class="st">"Runner"</span>, <span class="st">"Giant"</span>, <span class="st">"No."</span>,
        <span class="st">"Bunch"</span>, <span class="st">"Peanut"</span>)
GN1[GN1fields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN1[GN1fields],
                         <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeKW</a></span>(x, y1, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN1[GN1fields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN1[GN1fields],
                         <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergePrefix</a></span>(x, y2, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN1[GN1fields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN1[GN1fields],
                         <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeSuffix</a></span>(x, y3, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN2[GN2fields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN2[GN2fields],
                         <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeKW</a></span>(x, y1, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN2[GN2fields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN2[GN2fields],
                         <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergePrefix</a></span>(x, y2, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN2[GN2fields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN2[GN2fields],
                         <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeSuffix</a></span>(x, y3, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))

<span class="co"># Remove duplicated DonorID records in GN2</span>
GN2 &lt;-<span class="st"> </span>GN2[<span class="op">!</span><span class="kw">duplicated</span>(GN2<span class="op">$</span>DonorID), ]

<span class="co"># Generate KWIC index</span>
GN1KWIC &lt;-<span class="st"> </span><span class="kw"><a href="../reference/KWIC.html">KWIC</a></span>(GN1, GN1fields)
GN2KWIC &lt;-<span class="st"> </span><span class="kw"><a href="../reference/KWIC.html">KWIC</a></span>(GN2, GN2fields)

<span class="co"># Specify the exceptions as a vector</span>
exep &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"BIG"</span>, <span class="st">"BOLD"</span>, <span class="st">"BUNCH"</span>, <span class="st">"C"</span>, <span class="st">"COMPANY"</span>, <span class="st">"CULTURE"</span>,
         <span class="st">"DARK"</span>, <span class="st">"E"</span>, <span class="st">"EARLY"</span>, <span class="st">"EC"</span>, <span class="st">"ERECT"</span>, <span class="st">"EXOTIC"</span>, <span class="st">"FLESH"</span>, <span class="st">"GROUNDNUT"</span>,
         <span class="st">"GUTHUKAI"</span>, <span class="st">"IMPROVED"</span>, <span class="st">"K"</span>, <span class="st">"KUTHUKADAL"</span>, <span class="st">"KUTHUKAI"</span>, <span class="st">"LARGE"</span>,
         <span class="st">"LIGHT"</span>, <span class="st">"LOCAL"</span>, <span class="st">"OF"</span>, <span class="st">"OVERO"</span>, <span class="st">"P"</span>, <span class="st">"PEANUT"</span>, <span class="st">"PURPLE"</span>, <span class="st">"R"</span>,
         <span class="st">"RED"</span>, <span class="st">"RUNNER"</span>, <span class="st">"S1"</span>, <span class="st">"SAM"</span>, <span class="st">"SMALL"</span>, <span class="st">"SPANISH"</span>, <span class="st">"TAN"</span>, <span class="st">"TYPE"</span>,
         <span class="st">"U"</span>, <span class="st">"VALENCIA"</span>, <span class="st">"VIRGINIA"</span>, <span class="st">"WHITE"</span>)

<span class="co"># Fetch fuzzy and phonetic duplicate sets by method b</span>
GNdupb &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ProbDup.html">ProbDup</a></span>(<span class="dt">kwic1 =</span> GN1KWIC, <span class="dt">kwic2 =</span> GN2KWIC, <span class="dt">method =</span> <span class="st">"b"</span>,
                  <span class="dt">excep =</span> exep, <span class="dt">fuzzy =</span> <span class="ot">TRUE</span>, <span class="dt">phonetic =</span> <span class="ot">TRUE</span>,
                  <span class="dt">encoding =</span> <span class="st">"primary"</span>, <span class="dt">semantic =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>Fuzzy matching</code></pre>
<pre><code>
  |                                                                       
  |=================================================================| 100%
Block 1 / 1 |</code></pre>
<pre><code>Phonetic matching</code></pre>
<pre><code>
  |                                                                       
  |=================================================================| 100%
Block 1 / 1 |</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(GNdupb)</code></pre></div>
<pre><code>[1] "ProbDup"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdupb</code></pre></div>
<pre><code>Method : b

KWIC1 fields : NationalID CollNo OtherID1 OtherID2

KWIC2 fields : DonorID CollNo OtherID1 OtherID2
 
                   No..of.Sets    No..of.Records
FuzzyDuplicates            107               353
PhoneticDuplicates          41               126
Total                      148 479(Distinct:383)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Fetch fuzzy and phonetic duplicate sets by method c</span>
GNdupc &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ProbDup.html">ProbDup</a></span>(<span class="dt">kwic1 =</span> GN1KWIC, <span class="dt">kwic2 =</span> GN2KWIC, <span class="dt">method =</span> <span class="st">"c"</span>,
                  <span class="dt">excep =</span> exep, <span class="dt">fuzzy =</span> <span class="ot">TRUE</span>, <span class="dt">phonetic =</span> <span class="ot">TRUE</span>,
                  <span class="dt">encoding =</span> <span class="st">"primary"</span>, <span class="dt">semantic =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>Fuzzy matching</code></pre>
<pre><code>
  |                                                                       
  |======================                                           |  33%
Block 1 / 3 |
  |                                                                       
  |===========================================                      |  67%
Block 2 / 3 |
  |                                                                       
  |=================================================================| 100%
Block 3 / 3 |</code></pre>
<pre><code>Phonetic matching</code></pre>
<pre><code>
  |                                                                       
  |======================                                           |  33%
Block 1 / 3 |
  |                                                                       
  |===========================================                      |  67%
Block 2 / 3 |
  |                                                                       
  |=================================================================| 100%
Block 3 / 3 |</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(GNdupc)</code></pre></div>
<pre><code>[1] "ProbDup"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdupc</code></pre></div>
<pre><code>Method : c

KWIC1 fields : NationalID CollNo OtherID1 OtherID2

KWIC2 fields : DonorID CollNo OtherID1 OtherID2
 
                   No..of.Sets    No..of.Records
FuzzyDuplicates            363               724
PhoneticDuplicates          98               257
Total                      461 981(Distinct:741)</code></pre>
</div>
<div id="matching-strategies" class="section level3">
<h3 class="hasAnchor">
<a href="#matching-strategies" class="anchor"></a>Matching Strategies</h3>
<ol style="list-style-type: decimal">
<li>
<strong>Fuzzy matching</strong> or approximate string matching of keywords is carried out by computing the <a href="https://en.wikipedia.org/wiki/Levenshtein_distance">generalized levenshtein (edit) distance</a> between them. This distance measure counts the number of deletions, insertions and substitutions necessary to turn one string to another.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load example dataset</span>
GN &lt;-<span class="st"> </span>GN1000

<span class="co"># Specify as a vector the database fields to be used</span>
GNfields &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"NationalID"</span>, <span class="st">"CollNo"</span>, <span class="st">"DonorID"</span>, <span class="st">"OtherID1"</span>, <span class="st">"OtherID2"</span>)

<span class="co"># Clean the data</span>
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields], <span class="cf">function</span>(x) <span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(x))
y1 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">"Gujarat"</span>, <span class="st">"Dwarf"</span>), <span class="kw">c</span>(<span class="st">"Castle"</span>, <span class="st">"Cary"</span>), <span class="kw">c</span>(<span class="st">"Small"</span>, <span class="st">"Japan"</span>),
<span class="kw">c</span>(<span class="st">"Big"</span>, <span class="st">"Japan"</span>), <span class="kw">c</span>(<span class="st">"Mani"</span>, <span class="st">"Blanco"</span>), <span class="kw">c</span>(<span class="st">"Uganda"</span>, <span class="st">"Erect"</span>),
<span class="kw">c</span>(<span class="st">"Mota"</span>, <span class="st">"Company"</span>))
y2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Dark"</span>, <span class="st">"Light"</span>, <span class="st">"Small"</span>, <span class="st">"Improved"</span>, <span class="st">"Punjab"</span>, <span class="st">"SAM"</span>)
y3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Local"</span>, <span class="st">"Bold"</span>, <span class="st">"Cary"</span>, <span class="st">"Mutant"</span>, <span class="st">"Runner"</span>, <span class="st">"Giant"</span>, <span class="st">"No."</span>,
        <span class="st">"Bunch"</span>, <span class="st">"Peanut"</span>)
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeKW</a></span>(x, y1, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergePrefix</a></span>(x, y2, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeSuffix</a></span>(x, y3, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))

<span class="co"># Generate the KWIC index</span>
GNKWIC &lt;-<span class="st"> </span><span class="kw"><a href="../reference/KWIC.html">KWIC</a></span>(GN, GNfields)

<span class="co"># Specify the exceptions as a vector</span>
exep &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"BIG"</span>, <span class="st">"BOLD"</span>, <span class="st">"BUNCH"</span>, <span class="st">"C"</span>, <span class="st">"COMPANY"</span>, <span class="st">"CULTURE"</span>,
         <span class="st">"DARK"</span>, <span class="st">"E"</span>, <span class="st">"EARLY"</span>, <span class="st">"EC"</span>, <span class="st">"ERECT"</span>, <span class="st">"EXOTIC"</span>, <span class="st">"FLESH"</span>, <span class="st">"GROUNDNUT"</span>,
         <span class="st">"GUTHUKAI"</span>, <span class="st">"IMPROVED"</span>, <span class="st">"K"</span>, <span class="st">"KUTHUKADAL"</span>, <span class="st">"KUTHUKAI"</span>, <span class="st">"LARGE"</span>,
         <span class="st">"LIGHT"</span>, <span class="st">"LOCAL"</span>, <span class="st">"OF"</span>, <span class="st">"OVERO"</span>, <span class="st">"P"</span>, <span class="st">"PEANUT"</span>, <span class="st">"PURPLE"</span>, <span class="st">"R"</span>,
         <span class="st">"RED"</span>, <span class="st">"RUNNER"</span>, <span class="st">"S1"</span>, <span class="st">"SAM"</span>, <span class="st">"SMALL"</span>, <span class="st">"SPANISH"</span>, <span class="st">"TAN"</span>, <span class="st">"TYPE"</span>,
         <span class="st">"U"</span>, <span class="st">"VALENCIA"</span>, <span class="st">"VIRGINIA"</span>, <span class="st">"WHITE"</span>)

<span class="co"># Fetch fuzzy duplicates</span>
GNdup &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ProbDup.html">ProbDup</a></span>(<span class="dt">kwic1 =</span> GNKWIC, <span class="dt">method =</span> <span class="st">"a"</span>, <span class="dt">excep =</span> exep, 
                 <span class="dt">fuzzy =</span> <span class="ot">TRUE</span>, <span class="dt">max.dist =</span> <span class="dv">3</span>,
                 <span class="dt">phonetic =</span> <span class="ot">FALSE</span>, <span class="dt">semantic =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>Fuzzy matching</code></pre>
<pre><code>
  |                                                                       
  |================                                                 |  25%
Block 1 / 4 |
  |                                                                       
  |================================                                 |  50%
Block 2 / 4 |
  |                                                                       
  |=================================================                |  75%
Block 3 / 4 |
  |                                                                       
  |=================================================================| 100%
Block 4 / 4 |</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdup</code></pre></div>
<pre><code>Method : a

KWIC1 fields : NationalID CollNo DonorID OtherID1 OtherID2
 
                No..of.Sets    No..of.Records
FuzzyDuplicates         378               745
Total                   378 745(Distinct:745)</code></pre>
<p>The maximum distance to be considered for a match can be specified by <code>max.dist</code> argument.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdup &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ProbDup.html">ProbDup</a></span>(<span class="dt">kwic1 =</span> GNKWIC, <span class="dt">method =</span> <span class="st">"a"</span>, <span class="dt">excep =</span> exep, 
                 <span class="dt">fuzzy =</span> <span class="ot">TRUE</span>, <span class="dt">max.dist =</span> <span class="dv">1</span>,
                 <span class="dt">phonetic =</span> <span class="ot">FALSE</span>, <span class="dt">semantic =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>Fuzzy matching</code></pre>
<pre><code>
  |                                                                       
  |================                                                 |  25%
Block 1 / 4 |
  |                                                                       
  |================================                                 |  50%
Block 2 / 4 |
  |                                                                       
  |=================================================                |  75%
Block 3 / 4 |
  |                                                                       
  |=================================================================| 100%
Block 4 / 4 |</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdup</code></pre></div>
<pre><code>Method : a

KWIC1 fields : NationalID CollNo DonorID OtherID1 OtherID2
 
                No..of.Sets    No..of.Records
FuzzyDuplicates         288               679
Total                   288 679(Distinct:679)</code></pre>
<p>Exact matching can be enforced with the argument <code>force.exact</code> set as TRUE. It can be used to avoid fuzzy matching when the number of alphabet characters in keywords is lesser than a critical value (<code>max.alpha</code>). Similarly, the value of <code>max.digit</code> can also be set according to the requirements to enforce exact matching. The default value of <code>Inf</code> avoids fuzzy matching and enforces exact matching for all keywords having any numerical characters. If <code>max.digit</code> and <code>max.alpha</code> are both set to <code>Inf</code>, exact matching will be enforced for all the keywords.</p>
<p>When exact matching is enforced, for keywords having both alphabet and numeric characters and with the number of alphabet characters greater than <code>max.digit</code>, matching will be carried out separately for alphabet and numeric characters present.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdup &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ProbDup.html">ProbDup</a></span>(<span class="dt">kwic1 =</span> GNKWIC, <span class="dt">method =</span> <span class="st">"a"</span>, <span class="dt">excep =</span> exep, 
                 <span class="dt">fuzzy =</span> <span class="ot">TRUE</span>, <span class="dt">force.exact =</span> <span class="ot">TRUE</span>, <span class="dt">max.alpha =</span> <span class="dv">4</span>, <span class="dt">max.digit =</span> <span class="ot">Inf</span>,
                 <span class="dt">phonetic =</span> <span class="ot">FALSE</span>, <span class="dt">semantic =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>Fuzzy matching</code></pre>
<pre><code>
  |                                                                       
  |================                                                 |  25%
Block 1 / 4 |
  |                                                                       
  |================================                                 |  50%
Block 2 / 4 |
  |                                                                       
  |=================================================                |  75%
Block 3 / 4 |
  |                                                                       
  |=================================================================| 100%
Block 4 / 4 |</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdup</code></pre></div>
<pre><code>Method : a

KWIC1 fields : NationalID CollNo DonorID OtherID1 OtherID2
 
                No..of.Sets    No..of.Records
FuzzyDuplicates         378               745
Total                   378 745(Distinct:745)</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>
<strong>Phonetic matching</strong> of keywords is carried out using the Double Metaphone phonetic algorithm which is implemented as the helper function <code>DoubleMetaphone</code>, <span class="citation">(Philips 2000)</span>, to identify keywords that have the similar pronunciation.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdup &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ProbDup.html">ProbDup</a></span>(<span class="dt">kwic1 =</span> GNKWIC, <span class="dt">method =</span> <span class="st">"a"</span>, <span class="dt">excep =</span> exep, 
                 <span class="dt">fuzzy =</span> <span class="ot">FALSE</span>,
                 <span class="dt">phonetic =</span> <span class="ot">TRUE</span>,
                 <span class="dt">semantic =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>Phonetic matching</code></pre>
<pre><code>
  |                                                                       
  |================                                                 |  25%
Block 1 / 4 |
  |                                                                       
  |================================                                 |  50%
Block 2 / 4 |
  |                                                                       
  |=================================================                |  75%
Block 3 / 4 |
  |                                                                       
  |=================================================================| 100%
Block 4 / 4 |</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdup</code></pre></div>
<pre><code>Method : a

KWIC1 fields : NationalID CollNo DonorID OtherID1 OtherID2
 
                   No..of.Sets    No..of.Records
PhoneticDuplicates          99               260
Total                       99 260(Distinct:260)</code></pre>
<p>Either the primary or alternate encodings can be used by specifying the <code>encoding</code> argument.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdup &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ProbDup.html">ProbDup</a></span>(<span class="dt">kwic1 =</span> GNKWIC, <span class="dt">method =</span> <span class="st">"a"</span>, <span class="dt">excep =</span> exep, 
                 <span class="dt">fuzzy =</span> <span class="ot">FALSE</span>,
                 <span class="dt">phonetic =</span> <span class="ot">TRUE</span>, <span class="dt">encoding =</span> <span class="st">"alternate"</span>,
                 <span class="dt">semantic =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>Phonetic matching</code></pre>
<pre><code>
  |                                                                       
  |================                                                 |  25%
Block 1 / 4 |
  |                                                                       
  |================================                                 |  50%
Block 2 / 4 |
  |                                                                       
  |=================================================                |  75%
Block 3 / 4 |
  |                                                                       
  |=================================================================| 100%
Block 4 / 4 |</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdup</code></pre></div>
<pre><code>Method : a

KWIC1 fields : NationalID CollNo DonorID OtherID1 OtherID2
 
                   No..of.Sets    No..of.Records
PhoneticDuplicates          98               263
Total                       98 263(Distinct:263)</code></pre>
<p>The argument <code>phon.min.alpha</code> sets the limits for the number of alphabet characters to be present in a string for executing phonetic matching.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdup &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ProbDup.html">ProbDup</a></span>(<span class="dt">kwic1 =</span> GNKWIC, <span class="dt">method =</span> <span class="st">"a"</span>, <span class="dt">excep =</span> exep, 
                 <span class="dt">fuzzy =</span> <span class="ot">FALSE</span>,
                 <span class="dt">phonetic =</span> <span class="ot">TRUE</span>, <span class="dt">encoding =</span> <span class="st">"alternate"</span>, <span class="dt">phon.min.alpha =</span> <span class="dv">4</span>,
                 <span class="dt">semantic =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>Phonetic matching</code></pre>
<pre><code>
  |                                                                       
  |================                                                 |  25%
Block 1 / 4 |
  |                                                                       
  |================================                                 |  50%
Block 2 / 4 |
  |                                                                       
  |=================================================                |  75%
Block 3 / 4 |
  |                                                                       
  |=================================================================| 100%
Block 4 / 4 |</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdup</code></pre></div>
<pre><code>Method : a

KWIC1 fields : NationalID CollNo DonorID OtherID1 OtherID2
 
                   No..of.Sets    No..of.Records
PhoneticDuplicates         304               451
Total                      304 451(Distinct:451)</code></pre>
<p>Similarly <code>min.enc</code> sets the limits for the number of characters to be present in the encoding of a keyword for phonetic matching.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdup &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ProbDup.html">ProbDup</a></span>(<span class="dt">kwic1 =</span> GNKWIC, <span class="dt">method =</span> <span class="st">"a"</span>, <span class="dt">excep =</span> exep, 
                 <span class="dt">fuzzy =</span> <span class="ot">FALSE</span>,
                 <span class="dt">phonetic =</span> <span class="ot">TRUE</span>, <span class="dt">encoding =</span> <span class="st">"alternate"</span>, <span class="dt">min.enc =</span> <span class="dv">4</span>,
                 <span class="dt">semantic =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>Phonetic matching</code></pre>
<pre><code>
  |                                                                       
  |================                                                 |  25%
Block 1 / 4 |
  |                                                                       
  |================================                                 |  50%
Block 2 / 4 |
  |                                                                       
  |=================================================                |  75%
Block 3 / 4 |
  |                                                                       
  |=================================================================| 100%
Block 4 / 4 |</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdup</code></pre></div>
<pre><code>Method : a

KWIC1 fields : NationalID CollNo DonorID OtherID1 OtherID2
 
                   No..of.Sets    No..of.Records
PhoneticDuplicates          59               156
Total                       59 156(Distinct:156)</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>
<strong>Semantic matching</strong> matches keywords based on a list of accession name synonyms supplied as list with character vectors of synonym sets (synsets) to the <code>syn</code> argument. Synonyms in this context refer to interchangeable identifiers or names by which an accession is recognized. Multiple keywords specified as members of the same synset in <code>syn</code> are matched. To facilitate accurate identification of synonyms from the KWIC index, identical data standardization operations using the <code>Merge*</code> and <code>DataClean</code> functions for both the original database fields and the synset list are recommended.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Specify the synsets as a list</span>
syn &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">"CHANDRA"</span>, <span class="st">"AH 114"</span>), <span class="kw">c</span>(<span class="st">"TG-1"</span>, <span class="st">"VIKRAM"</span>))

<span class="co"># Clean the data in the synsets</span>
syn &lt;-<span class="st"> </span><span class="kw">lapply</span>(syn, DataClean)

GNdup &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ProbDup.html">ProbDup</a></span>(<span class="dt">kwic1 =</span> GNKWIC, <span class="dt">method =</span> <span class="st">"a"</span>, <span class="dt">excep =</span> exep, 
                 <span class="dt">fuzzy =</span> <span class="ot">FALSE</span>, <span class="dt">phonetic =</span> <span class="ot">FALSE</span>,
                 <span class="dt">semantic =</span> <span class="ot">TRUE</span>, <span class="dt">syn =</span> syn)</code></pre></div>
<pre><code>Semantic matching</code></pre>
<pre><code>
  |                                                                       
  |================                                                 |  25%
Block 1 / 4 |
  |                                                                       
  |================================                                 |  50%
Block 2 / 4 |
  |                                                                       
  |=================================================                |  75%
Block 3 / 4 |
  |                                                                       
  |=================================================================| 100%
Block 4 / 4 |</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdup</code></pre></div>
<pre><code>Method : a

KWIC1 fields : NationalID CollNo DonorID OtherID1 OtherID2
 
                   No..of.Sets No..of.Records
SemanticDuplicates           2              5
Total                        2  5(Distinct:5)</code></pre>
</div>
<div id="memory-and-speed-constraints" class="section level3">
<h3 class="hasAnchor">
<a href="#memory-and-speed-constraints" class="anchor"></a>Memory and Speed Constraints</h3>
<p>As the number of keywords in the KWIC indexes increases, the memory consumption by the function also increases proportionally. This is due to the reason that for string matching, this function relies upon creation of a <em>n</em><span class="math inline">\(\times\)</span><em>m</em> matrix of all possible keyword pairs for comparison, where <em>n</em> and <em>m</em> are the number of keywords in the query and source indexes respectively. This can lead to <code>cannot allocate vector of size...</code> errors in case of large KWIC indexes where the comparison matrix is too large to reside in memory. In such a case, the <code>chunksize</code> argument can be reduced from the default 1000 to get the appropriate size of the KWIC index keyword block to be used for searching for matches at a time. However a smaller <code>chunksize</code> may lead to longer computation time due to the memory-time trade-off.</p>
<p>The progress of matching is displayed in the console as number of keyword blocks completed out of the total number of blocks, the percentage of achievement and a text-based progress bar.</p>
<p>In case of multi-byte characters in keywords, the speed of keyword matching is further dependent upon the <code>useBytes</code> argument as described in <code>help("stringdist-encoding")</code> for the <code>stringdist</code> function in the namesake <a href="https://CRAN.R-project.org/package=stringdist">package</a> <span class="citation">(van der Loo 2014)</span>, which is made use of here for string matching.</p>
<p>The CPU time taken for retrieval of probable duplicate sets under different options for the arguments <code>chunksize</code> and <code>useBytes</code> can be visualized using the <a href="https://CRAN.R-project.org/package=microbenchmark"><code>microbenchmark</code></a> package (Fig. 3).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load example dataset</span>
GN &lt;-<span class="st"> </span>GN1000

<span class="co"># Specify as a vector the database fields to be used</span>
GNfields &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"NationalID"</span>, <span class="st">"CollNo"</span>, <span class="st">"DonorID"</span>, <span class="st">"OtherID1"</span>, <span class="st">"OtherID2"</span>)

<span class="co"># Clean the data</span>
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields], <span class="cf">function</span>(x) <span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(x))
y1 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">"Gujarat"</span>, <span class="st">"Dwarf"</span>), <span class="kw">c</span>(<span class="st">"Castle"</span>, <span class="st">"Cary"</span>), <span class="kw">c</span>(<span class="st">"Small"</span>, <span class="st">"Japan"</span>),
           <span class="kw">c</span>(<span class="st">"Big"</span>, <span class="st">"Japan"</span>), <span class="kw">c</span>(<span class="st">"Mani"</span>, <span class="st">"Blanco"</span>), <span class="kw">c</span>(<span class="st">"Uganda"</span>, <span class="st">"Erect"</span>),
           <span class="kw">c</span>(<span class="st">"Mota"</span>, <span class="st">"Company"</span>))
y2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Dark"</span>, <span class="st">"Light"</span>, <span class="st">"Small"</span>, <span class="st">"Improved"</span>, <span class="st">"Punjab"</span>, <span class="st">"SAM"</span>)
y3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Local"</span>, <span class="st">"Bold"</span>, <span class="st">"Cary"</span>, <span class="st">"Mutant"</span>, <span class="st">"Runner"</span>, <span class="st">"Giant"</span>, <span class="st">"No."</span>, <span class="st">"Bunch"</span>, <span class="st">"Peanut"</span>)
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeKW</a></span>(x, y1, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergePrefix</a></span>(x, y2, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeSuffix</a></span>(x, y3, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))

<span class="co"># Generate the KWIC index</span>
GNKWIC &lt;-<span class="st"> </span><span class="kw"><a href="../reference/KWIC.html">KWIC</a></span>(GN, GNfields)

<span class="co"># Specify the exceptions as a vector</span>
exep &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"BIG"</span>, <span class="st">"BOLD"</span>, <span class="st">"BUNCH"</span>, <span class="st">"C"</span>, <span class="st">"COMPANY"</span>, <span class="st">"CULTURE"</span>, <span class="st">"DARK"</span>,
          <span class="st">"E"</span>, <span class="st">"EARLY"</span>, <span class="st">"EC"</span>, <span class="st">"ERECT"</span>, <span class="st">"EXOTIC"</span>, <span class="st">"FLESH"</span>, <span class="st">"GROUNDNUT"</span>, <span class="st">"GUTHUKAI"</span>,
          <span class="st">"IMPROVED"</span>, <span class="st">"K"</span>, <span class="st">"KUTHUKADAL"</span>, <span class="st">"KUTHUKAI"</span>, <span class="st">"LARGE"</span>, <span class="st">"LIGHT"</span>, <span class="st">"LOCAL"</span>,
          <span class="st">"OF"</span>, <span class="st">"OVERO"</span>, <span class="st">"P"</span>, <span class="st">"PEANUT"</span>, <span class="st">"PURPLE"</span>, <span class="st">"R"</span>, <span class="st">"RED"</span>, <span class="st">"RUNNER"</span>, <span class="st">"S1"</span>, <span class="st">"SAM"</span>,
          <span class="st">"SMALL"</span>, <span class="st">"SPANISH"</span>, <span class="st">"TAN"</span>, <span class="st">"TYPE"</span>, <span class="st">"U"</span>, <span class="st">"VALENCIA"</span>, <span class="st">"VIRGINIA"</span>, <span class="st">"WHITE"</span>)

<span class="co"># Specify the synsets as a list</span>
syn &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">"CHANDRA"</span>, <span class="st">"AH 114"</span>), <span class="kw">c</span>(<span class="st">"TG-1"</span>, <span class="st">"VIKRAM"</span>))
syn &lt;-<span class="st"> </span><span class="kw">lapply</span>(syn, DataClean)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">timings &lt;-<span class="st"> </span>microbenchmark<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/microbenchmark/topics/microbenchmark">microbenchmark</a></span>(
  <span class="co"># Fetch duplicate sets with default chunk.size</span>
  <span class="dt">t1 =</span> <span class="kw"><a href="../reference/ProbDup.html">ProbDup</a></span>(<span class="dt">kwic1 =</span> GNKWIC, <span class="dt">method =</span> <span class="st">"a"</span>, <span class="dt">excep =</span> exep,
                                     <span class="dt">chunksize =</span> <span class="dv">1000</span>, <span class="dt">useBytes =</span> <span class="ot">TRUE</span>,
                                     <span class="dt">fuzzy =</span> <span class="ot">TRUE</span>, <span class="dt">phonetic =</span> <span class="ot">TRUE</span>,
                                     <span class="dt">semantic =</span> <span class="ot">TRUE</span>, <span class="dt">syn =</span> syn),
  <span class="co"># Fetch duplicate sets chunk.size 2000</span>
  <span class="dt">t2 =</span> <span class="kw"><a href="../reference/ProbDup.html">ProbDup</a></span>(<span class="dt">kwic1 =</span> GNKWIC, <span class="dt">method =</span> <span class="st">"a"</span>, <span class="dt">excep =</span> exep,
                                     <span class="dt">chunksize =</span> <span class="dv">2000</span>, <span class="dt">useBytes =</span> <span class="ot">TRUE</span>,
                                     <span class="dt">fuzzy =</span> <span class="ot">TRUE</span>, <span class="dt">phonetic =</span> <span class="ot">TRUE</span>,
                                     <span class="dt">semantic =</span> <span class="ot">TRUE</span>, <span class="dt">syn =</span> syn),
  <span class="co"># Fetch duplicate sets chunk.size 100</span>
  <span class="dt">t3 =</span> <span class="kw"><a href="../reference/ProbDup.html">ProbDup</a></span>(<span class="dt">kwic1 =</span> GNKWIC, <span class="dt">method =</span> <span class="st">"a"</span>, <span class="dt">excep =</span> exep,
                                     <span class="dt">chunksize =</span> <span class="dv">100</span>, <span class="dt">useBytes =</span> <span class="ot">TRUE</span>,
                                     <span class="dt">fuzzy =</span> <span class="ot">TRUE</span>, <span class="dt">phonetic =</span> <span class="ot">TRUE</span>,
                                     <span class="dt">semantic =</span> <span class="ot">TRUE</span>, <span class="dt">syn =</span> syn),
  <span class="co"># Fetch duplicate sets useBytes = FALSE</span>
  <span class="dt">t4 =</span> <span class="kw"><a href="../reference/ProbDup.html">ProbDup</a></span>(<span class="dt">kwic1 =</span> GNKWIC, <span class="dt">method =</span> <span class="st">"a"</span>, <span class="dt">excep =</span> exep,
                                     <span class="dt">chunksize =</span> <span class="dv">1000</span>, <span class="dt">useBytes =</span> <span class="ot">FALSE</span>,
                                     <span class="dt">fuzzy =</span> <span class="ot">TRUE</span>, <span class="dt">phonetic =</span> <span class="ot">TRUE</span>,
                                     <span class="dt">semantic =</span> <span class="ot">TRUE</span>, <span class="dt">syn =</span> syn), <span class="dt">times =</span> <span class="dv">10</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(timings, <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">"#1B9E77"</span>, <span class="st">"#D95F02"</span>, <span class="st">"#7570B3"</span>, <span class="st">"#E7298A"</span>),
     <span class="dt">xlab =</span> <span class="st">"Expression"</span>, <span class="dt">ylab =</span> <span class="st">"Time"</span>)
<span class="kw">legend</span>(<span class="st">"topright"</span>, <span class="kw">c</span>(<span class="st">"t1 : chunksize = 1000,</span><span class="ch">\n</span><span class="st">     useBytes = T (default)</span><span class="ch">\n</span><span class="st">"</span>,
         <span class="st">"t2 : chunksize = 2000,</span><span class="ch">\n</span><span class="st">     useBytes = T</span><span class="ch">\n</span><span class="st">"</span>,
         <span class="st">"t3 : chunksize = 500,</span><span class="ch">\n</span><span class="st">     useBytes = T</span><span class="ch">\n</span><span class="st">"</span>,
         <span class="st">"t4 : chunksize = 1000,</span><span class="ch">\n</span><span class="st">     useBytes = F</span><span class="ch">\n</span><span class="st">"</span>),
       <span class="dt">bty =</span> <span class="st">"n"</span>, <span class="dt">cex =</span> <span class="fl">0.6</span>)</code></pre></div>
<p><img src="Introduction_files/figure-html/unnamed-chunk-41-1.png" width="672"></p>
<p><strong>Fig. 3.</strong> CPU time with different <code>ProbDup</code> arguments estimated using the <code>microbenchmark</code> package.</p>
</div>
</div>
<div id="set-review-modification-and-validation" class="section level2">
<h2 class="hasAnchor">
<a href="#set-review-modification-and-validation" class="anchor"></a>Set Review, Modification and Validation</h2>
<p>The initially retrieved sets may be intersecting with each other because there might be accessions which occur in more than duplicate set. Disjoint sets can be generated by merging such overlapping sets using the function <code>DisProbDup</code>.</p>
<p>Disjoint sets are retrieved either individually for each type of probable duplicate sets or considering all type of sets simultaneously. In case of the latter, the disjoint of all the type of sets alone are returned in the output as an additional data frame <code>DisjointDupicates</code> in an object of class <code>ProbDup</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load example dataset</span>
GN &lt;-<span class="st"> </span>GN1000

<span class="co"># Specify as a vector the database fields to be used</span>
GNfields &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"NationalID"</span>, <span class="st">"CollNo"</span>, <span class="st">"DonorID"</span>, <span class="st">"OtherID1"</span>, <span class="st">"OtherID2"</span>)

<span class="co"># Clean the data</span>
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields], <span class="cf">function</span>(x) <span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(x))
y1 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">"Gujarat"</span>, <span class="st">"Dwarf"</span>), <span class="kw">c</span>(<span class="st">"Castle"</span>, <span class="st">"Cary"</span>), <span class="kw">c</span>(<span class="st">"Small"</span>, <span class="st">"Japan"</span>),
<span class="kw">c</span>(<span class="st">"Big"</span>, <span class="st">"Japan"</span>), <span class="kw">c</span>(<span class="st">"Mani"</span>, <span class="st">"Blanco"</span>), <span class="kw">c</span>(<span class="st">"Uganda"</span>, <span class="st">"Erect"</span>),
<span class="kw">c</span>(<span class="st">"Mota"</span>, <span class="st">"Company"</span>))
y2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Dark"</span>, <span class="st">"Light"</span>, <span class="st">"Small"</span>, <span class="st">"Improved"</span>, <span class="st">"Punjab"</span>, <span class="st">"SAM"</span>)
y3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Local"</span>, <span class="st">"Bold"</span>, <span class="st">"Cary"</span>, <span class="st">"Mutant"</span>, <span class="st">"Runner"</span>, <span class="st">"Giant"</span>, <span class="st">"No."</span>,
        <span class="st">"Bunch"</span>, <span class="st">"Peanut"</span>)
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeKW</a></span>(x, y1, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergePrefix</a></span>(x, y2, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeSuffix</a></span>(x, y3, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))

<span class="co"># Generate KWIC index</span>
GNKWIC &lt;-<span class="st"> </span><span class="kw"><a href="../reference/KWIC.html">KWIC</a></span>(GN, GNfields)

<span class="co"># Specify the exceptions as a vector</span>
exep &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"BIG"</span>, <span class="st">"BOLD"</span>, <span class="st">"BUNCH"</span>, <span class="st">"C"</span>, <span class="st">"COMPANY"</span>, <span class="st">"CULTURE"</span>,
         <span class="st">"DARK"</span>, <span class="st">"E"</span>, <span class="st">"EARLY"</span>, <span class="st">"EC"</span>, <span class="st">"ERECT"</span>, <span class="st">"EXOTIC"</span>, <span class="st">"FLESH"</span>, <span class="st">"GROUNDNUT"</span>,
         <span class="st">"GUTHUKAI"</span>, <span class="st">"IMPROVED"</span>, <span class="st">"K"</span>, <span class="st">"KUTHUKADAL"</span>, <span class="st">"KUTHUKAI"</span>, <span class="st">"LARGE"</span>,
         <span class="st">"LIGHT"</span>, <span class="st">"LOCAL"</span>, <span class="st">"OF"</span>, <span class="st">"OVERO"</span>, <span class="st">"P"</span>, <span class="st">"PEANUT"</span>, <span class="st">"PURPLE"</span>, <span class="st">"R"</span>,
         <span class="st">"RED"</span>, <span class="st">"RUNNER"</span>, <span class="st">"S1"</span>, <span class="st">"SAM"</span>, <span class="st">"SMALL"</span>, <span class="st">"SPANISH"</span>, <span class="st">"TAN"</span>, <span class="st">"TYPE"</span>,
         <span class="st">"U"</span>, <span class="st">"VALENCIA"</span>, <span class="st">"VIRGINIA"</span>, <span class="st">"WHITE"</span>)

<span class="co"># Specify the synsets as a list</span>
syn &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">"CHANDRA"</span>, <span class="st">"AH114"</span>), <span class="kw">c</span>(<span class="st">"TG1"</span>, <span class="st">"VIKRAM"</span>))

<span class="co"># Fetch probable duplicate sets</span>
GNdup &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ProbDup.html">ProbDup</a></span>(<span class="dt">kwic1 =</span> GNKWIC, <span class="dt">method =</span> <span class="st">"a"</span>, <span class="dt">excep =</span> exep, <span class="dt">fuzzy =</span> <span class="ot">TRUE</span>,
                 <span class="dt">phonetic =</span> <span class="ot">TRUE</span>, <span class="dt">encoding =</span> <span class="st">"primary"</span>,
                 <span class="dt">semantic =</span> <span class="ot">TRUE</span>, <span class="dt">syn =</span> syn)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Initial number of sets</span>
GNdup</code></pre></div>
<pre><code>Method : a

KWIC1 fields : NationalID CollNo DonorID OtherID1 OtherID2
 
                   No..of.Sets     No..of.Records
FuzzyDuplicates            378                745
PhoneticDuplicates          99                260
SemanticDuplicates           2                  5
Total                      479 1010(Distinct:762)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get disjoint probable duplicate sets of each kind</span>
disGNdup1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/DisProbDup.html">DisProbDup</a></span>(GNdup, <span class="dt">combine =</span> <span class="ot">NULL</span>)
<span class="co"># # Number of sets after combining intersecting sets</span>
disGNdup1</code></pre></div>
<pre><code>Method : a

KWIC1 fields : NationalID CollNo DonorID OtherID1 OtherID2
 
                   No..of.Sets     No..of.Records
FuzzyDuplicates            181                745
PhoneticDuplicates          80                260
SemanticDuplicates           2                  5
Total                      263 1010(Distinct:762)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get disjoint probable duplicate sets combining all the kinds of sets</span>
disGNdup2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/DisProbDup.html">DisProbDup</a></span>(GNdup, <span class="dt">combine =</span> <span class="kw">c</span>(<span class="st">"F"</span>, <span class="st">"P"</span>, <span class="st">"S"</span>))
<span class="co"># Number of sets after combining intersecting sets</span>
disGNdup2</code></pre></div>
<pre><code>Method : a

KWIC1 fields : NationalID CollNo DonorID OtherID1 OtherID2
 
                  No..of.Sets    No..of.Records
DisjointDupicates         167               762
Total                     167 762(Distinct:762)</code></pre>
<p>Once duplicate sets are retrieved they can be validated by manual clerical review by comparing with original PGR passport database(s) using the <code>ReviewProbDup</code> function. This function helps to retrieve PGR passport information associated with fuzzy, phonetic or semantic probable duplicate sets in an object of class <code>ProbDup</code> from the original databases(s) from which they were identified. The original information of accessions comprising a set, which have not been subjected to data standardization can be compared under manual clerical review for the validation of the set. By default only the fields(columns) which were used initially for creation of the KWIC indexes using the KWIC function are retrieved. Additional fields(columns) if necessary can be specified using the <code>extra.db1</code> and <code>extra.db2</code> arguments.</p>
<p>When any primary ID/key records in the fuzzy, phonetic or semantic duplicate sets are found to be missing from the original databases specified in <code>db1</code> and <code>db2</code>, then they are ignored and only the matching records are considered for retrieving the information with a warning.</p>
<p>This may be due to data standardization of the primary ID/key field using the function <code>DataClean</code> before creation of the KWIC index and subsequent identification of probable duplicate sets. In such a case, it is recommended to use an identical data standardization operation on the primary ID/key field of databases specified in <code>db1</code> and <code>db2</code> before running this function.</p>
<p>With <code>R</code> &lt;= v3.0.2, due to copying of named objects by <code>list()</code>, <code>Invalid .internal.selfref detected and fixed...</code> warning can appear, which may be safely ignored.</p>
<p>The output data frame can be subjected to clerical review either after exporting into an external spreadsheet using <code>write.csv</code> function or by using the <code>edit</code> function.</p>
<p>The column <code>DEL</code> can be used to indicate whether a record has to be deleted from a set or not. <code>Y</code> indicates “Yes”, and the default <code>N</code> indicates “No”.</p>
<p>The column <code>SPLIT</code> similarly can be used to indicate whether a record in a set has to be branched into a new set. A set of identical integers in this column other than the default <code>0</code> can be used to indicate that they are to be removed and assembled into a new set.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load the original database and clean the Primary ID/key field</span>
GN1000 &lt;-<span class="st"> </span>GN1000
GN1000<span class="op">$</span>NationalID &lt;-<span class="st"> </span><span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(GN1000<span class="op">$</span>NationalID)

<span class="co"># Get the data frame for reviewing the duplicate sets identified</span>
RevGNdup &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ReviewProbDup.html">ReviewProbDup</a></span>(<span class="dt">pdup =</span> disGNdup1, <span class="dt">db1 =</span> GN1000,
                          <span class="dt">extra.db1 =</span> <span class="kw">c</span>(<span class="st">"SourceCountry"</span>, <span class="st">"TransferYear"</span>),
                          <span class="dt">max.count =</span> <span class="dv">30</span>, <span class="dt">insert.blanks =</span> <span class="ot">TRUE</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(RevGNdup)</code></pre></div>
<pre><code>  SET_NO TYPE K[a]  PRIM_ID                IDKW  DEL SPLIT COUNT
1      1    F [K1] EC100277 [K1]EC100277:U44712    N     0     3
2      1    F [K1]  EC21118  [K1]EC21118:U44712    N     0     3
3      1    F [K1] IC494796 [K1]IC494796:U44712    N     0     3
4     NA      &lt;NA&gt;     &lt;NA&gt;                &lt;NA&gt; &lt;NA&gt;    NA    NA
5      1    P [K1] EC100713  [K1]EC100713:STARR    N     0    14
6      1    P [K1] EC106985  [K1]EC106985:STARR    N     0    14
  K1_NationalID                K1_CollNo K1_DonorID K1_OtherID1
1      EC100277    Shulamith/ NRCG-14555   ICG-4709            
2       EC21118 U 4-47-12; EC 21118; UKA    ICG3265            
3      IC494796                U-4-47-12   ICG-6890            
4          &lt;NA&gt;                     &lt;NA&gt;       &lt;NA&gt;        &lt;NA&gt;
5      EC100713               EC 100713;    ICG5296            
6      EC106985                    Starr    ICG3479            
   K1_OtherID2        K1X_SourceCountry K1X_TransferYear
1     U4-47-12                   Israel             2014
2 U44712 U K A                Australia             1989
3       U44712                  Unknown             2010
4         &lt;NA&gt;                     &lt;NA&gt;               NA
5        STARR United States of America             2004
6              United States of America             2001</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Examine and review the duplicate sets using edit function</span>
RevGNdup &lt;-<span class="st"> </span><span class="kw">edit</span>(RevGNdup)

<span class="co"># OR examine and review the duplicate sets after exporting them as a csv file</span>
<span class="kw">write.csv</span>(<span class="dt">file=</span><span class="st">"Duplicate sets for review.csv"</span>, <span class="dt">x=</span>RevGNdup)</code></pre></div>
<p>After clerical review, the data frame created using the function <code>ReviewProbDup</code> from an object of class <code>ProbDup</code> can be reconstituted back to the same object after the review using the function <code>ReconstructProbDup</code>.</p>
<p>The instructions for modifying the sets entered in the appropriate format in the columns <code>DEL</code> and <code>SPLIT</code> during clerical review are taken into account for reconstituting the probable duplicate sets. Any records with <code>Y</code> in column <code>DEL</code> are deleted and records with identical integers in the column <code>SPLIT</code> other than the default <code>0</code> are reassembled into a new set.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># The original set data</span>
<span class="kw">subset</span>(RevGNdup, SET_NO<span class="op">==</span><span class="dv">13</span> <span class="op">&amp;</span><span class="st"> </span>TYPE<span class="op">==</span><span class="st">"P"</span>, <span class="dt">select=</span> <span class="kw">c</span>(IDKW, DEL, SPLIT))</code></pre></div>
<pre><code>                                             IDKW DEL SPLIT
111                         [K1]EC38607:MANFREDI1   N     0
112                         [K1]EC420966:MANFREDI   N     0
113                        [K1]EC42549:MANFREDI68   N     0
114                          [K1]EC42550:MANFRED1   N     0
115 [K1]EC552714:CHAMPAQUI, [K1]EC552714:MANFREDI   N     0
116                       [K1]EC573128:MANFREDI84   N     0
117 [K1]IC304523:CHAMPAGUE, [K1]IC304523:MANFREDI   N     0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Make dummy changes to the set for illustration</span>
RevGNdup[<span class="kw">c</span>(<span class="dv">113</span>, <span class="dv">116</span>), <span class="dv">6</span>] &lt;-<span class="st"> "Y"</span>
RevGNdup[<span class="kw">c</span>(<span class="dv">111</span>, <span class="dv">114</span>), <span class="dv">7</span>] &lt;-<span class="st"> </span><span class="dv">1</span>
RevGNdup[<span class="kw">c</span>(<span class="dv">112</span>, <span class="dv">115</span>, <span class="dv">117</span>), <span class="dv">7</span>] &lt;-<span class="st"> </span><span class="dv">2</span>
<span class="co"># The instruction for modification in columns DEL and SPLIT</span>
<span class="kw">subset</span>(RevGNdup, SET_NO<span class="op">==</span><span class="dv">13</span> <span class="op">&amp;</span><span class="st"> </span>TYPE<span class="op">==</span><span class="st">"P"</span>, <span class="dt">select=</span> <span class="kw">c</span>(IDKW, DEL, SPLIT))</code></pre></div>
<pre><code>                                             IDKW DEL SPLIT
111                         [K1]EC38607:MANFREDI1   N     1
112                         [K1]EC420966:MANFREDI   N     2
113                        [K1]EC42549:MANFREDI68   Y     0
114                          [K1]EC42550:MANFRED1   N     1
115 [K1]EC552714:CHAMPAQUI, [K1]EC552714:MANFREDI   N     2
116                       [K1]EC573128:MANFREDI84   Y     0
117 [K1]IC304523:CHAMPAGUE, [K1]IC304523:MANFREDI   N     2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Reconstruct ProDup object</span>
GNdup2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ReconstructProbDup.html">ReconstructProbDup</a></span>(RevGNdup)
<span class="co"># Initial no. of sets</span>
disGNdup1</code></pre></div>
<pre><code>Method : a

KWIC1 fields : NationalID CollNo DonorID OtherID1 OtherID2
 
                   No..of.Sets     No..of.Records
FuzzyDuplicates            181                745
PhoneticDuplicates          80                260
SemanticDuplicates           2                  5
Total                      263 1010(Distinct:762)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># No. of sets after modifications</span>
GNdup2</code></pre></div>
<pre><code>Method : a

KWIC1 fields : NationalID CollNo DonorID OtherID1 OtherID2
 
                   No..of.Sets    No..of.Records
FuzzyDuplicates            180               523
PhoneticDuplicates          81               258
SemanticDuplicates           2                 5
Total                      263 786(Distinct:674)</code></pre>
</div>
<div id="other-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#other-functions" class="anchor"></a>Other Functions</h2>
<p>The <code>ProbDup</code> object is a list of data frames of different kinds of probable duplicate sets <em>viz</em>- <code>FuzzyDuplicates</code>, <code>PhoneticDuplicates</code>, <code>SemanticDuplicates</code> and <code>DisjointDuplicates</code>. Each row of the component data frame will have information of a set, the type of set, the set members as well as the keywords based on which the set was formed. This data can be reshaped into long form using the function <code>ParseProbDup</code>. This function which will transform a <code>ProbDup</code> object into a single data frame.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Convert 'ProbDup' object to a long form data frame of sets</span>
GNdupParsed &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ParseProbDup.html">ParseProbDup</a></span>(GNdup)
<span class="kw">head</span>(GNdupParsed)</code></pre></div>
<pre><code>  SET_NO TYPE    K  PRIM_ID                IDKW COUNT
1      1    F [K1] EC100277 [K1]EC100277:U44712     3
2      1    F [K1]  EC21118  [K1]EC21118:U44712     3
3      1    F [K1] IC494796 [K1]IC494796:U44712     3
4     NA      &lt;NA&gt;     &lt;NA&gt;                &lt;NA&gt;    NA
5      2    F [K1] EC100280    [K1]EC100280:NC5     3
6      2    F [K1] EC100721    [K1]EC100721:NC5     3</code></pre>
<p>The prefix <code>K*</code> here indicates the KWIC index of origin. This is useful in ascertaining the database of origin of the accessions when method <code>"b"</code> or <code>"c"</code> was used to create the input <code>ProbDup</code> object.</p>
<p>Once the sets are reviewed and modified, the validated set data fields from the <code>ProbDup</code> object can be added to the original PGR passport database using the function <code>AddProbDup</code>. The associated data fields such as <code>SET_NO</code>, <code>ID</code> and <code>IDKW</code> are added based on the <code>PRIM_ID</code> field(column).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Loading original database</span>
GN2 &lt;-<span class="st"> </span>GN1000

<span class="co"># Add the duplicates set data to the original database</span>
GNwithdup &lt;-<span class="st">  </span><span class="kw"><a href="../reference/AddProbDup.html">AddProbDup</a></span>(<span class="dt">pdup =</span> GNdup, <span class="dt">db =</span> GN2, <span class="dt">addto =</span> <span class="st">"I"</span>)</code></pre></div>
<p>In case more than one KWIC index was used to generate the object of class <code>ProbDup</code>, the argument <code>addto</code> can be used to specify to which database the data fields are to be added. The default <code>"I"</code> indicates the database from which the first KWIC index was created and <code>"II"</code> indicates the database from which the second index was created.</p>
<p>The function <code>SplitProbDup</code> can be used to split an object of class <code>ProbDup</code> into two on the basis of set counts. This is useful for reviewing separately the sets with larger set counts.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load PGR passport database</span>
GN &lt;-<span class="st"> </span>GN1000

<span class="co"># Specify as a vector the database fields to be used</span>
GNfields &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"NationalID"</span>, <span class="st">"CollNo"</span>, <span class="st">"DonorID"</span>, <span class="st">"OtherID1"</span>, <span class="st">"OtherID2"</span>)

<span class="co"># Clean the data</span>
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields], <span class="cf">function</span>(x) <span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(x))
y1 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">"Gujarat"</span>, <span class="st">"Dwarf"</span>), <span class="kw">c</span>(<span class="st">"Castle"</span>, <span class="st">"Cary"</span>), <span class="kw">c</span>(<span class="st">"Small"</span>, <span class="st">"Japan"</span>),
<span class="kw">c</span>(<span class="st">"Big"</span>, <span class="st">"Japan"</span>), <span class="kw">c</span>(<span class="st">"Mani"</span>, <span class="st">"Blanco"</span>), <span class="kw">c</span>(<span class="st">"Uganda"</span>, <span class="st">"Erect"</span>),
<span class="kw">c</span>(<span class="st">"Mota"</span>, <span class="st">"Company"</span>))
y2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Dark"</span>, <span class="st">"Light"</span>, <span class="st">"Small"</span>, <span class="st">"Improved"</span>, <span class="st">"Punjab"</span>, <span class="st">"SAM"</span>)
y3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Local"</span>, <span class="st">"Bold"</span>, <span class="st">"Cary"</span>, <span class="st">"Mutant"</span>, <span class="st">"Runner"</span>, <span class="st">"Giant"</span>, <span class="st">"No."</span>,
        <span class="st">"Bunch"</span>, <span class="st">"Peanut"</span>)
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeKW</a></span>(x, y1, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergePrefix</a></span>(x, y2, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN[GNfields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN[GNfields],
                       <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeSuffix</a></span>(x, y3, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))

<span class="co"># Generate KWIC index</span>
GNKWIC &lt;-<span class="st"> </span><span class="kw"><a href="../reference/KWIC.html">KWIC</a></span>(GN, GNfields)

<span class="co"># Specify the exceptions as a vector</span>
exep &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"BIG"</span>, <span class="st">"BOLD"</span>, <span class="st">"BUNCH"</span>, <span class="st">"C"</span>, <span class="st">"COMPANY"</span>, <span class="st">"CULTURE"</span>,
         <span class="st">"DARK"</span>, <span class="st">"E"</span>, <span class="st">"EARLY"</span>, <span class="st">"EC"</span>, <span class="st">"ERECT"</span>, <span class="st">"EXOTIC"</span>, <span class="st">"FLESH"</span>, <span class="st">"GROUNDNUT"</span>,
         <span class="st">"GUTHUKAI"</span>, <span class="st">"IMPROVED"</span>, <span class="st">"K"</span>, <span class="st">"KUTHUKADAL"</span>, <span class="st">"KUTHUKAI"</span>, <span class="st">"LARGE"</span>,
         <span class="st">"LIGHT"</span>, <span class="st">"LOCAL"</span>, <span class="st">"OF"</span>, <span class="st">"OVERO"</span>, <span class="st">"P"</span>, <span class="st">"PEANUT"</span>, <span class="st">"PURPLE"</span>, <span class="st">"R"</span>,
         <span class="st">"RED"</span>, <span class="st">"RUNNER"</span>, <span class="st">"S1"</span>, <span class="st">"SAM"</span>, <span class="st">"SMALL"</span>, <span class="st">"SPANISH"</span>, <span class="st">"TAN"</span>, <span class="st">"TYPE"</span>,
         <span class="st">"U"</span>, <span class="st">"VALENCIA"</span>, <span class="st">"VIRGINIA"</span>, <span class="st">"WHITE"</span>)

<span class="co"># Specify the synsets as a list</span>
syn &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">"CHANDRA"</span>, <span class="st">"AH114"</span>), <span class="kw">c</span>(<span class="st">"TG1"</span>, <span class="st">"VIKRAM"</span>))

<span class="co"># Fetch probable duplicate sets</span>
GNdup &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ProbDup.html">ProbDup</a></span>(<span class="dt">kwic1 =</span> GNKWIC, <span class="dt">method =</span> <span class="st">"a"</span>, <span class="dt">excep =</span> exep, <span class="dt">fuzzy =</span> <span class="ot">TRUE</span>,
                 <span class="dt">phonetic =</span> <span class="ot">TRUE</span>, <span class="dt">encoding =</span> <span class="st">"primary"</span>,
                 <span class="dt">semantic =</span> <span class="ot">TRUE</span>, <span class="dt">syn =</span> syn)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Split the probable duplicate sets</span>
GNdupSplit &lt;-<span class="st"> </span><span class="kw"><a href="../reference/SplitProbDup.html">SplitProbDup</a></span>(GNdup, <span class="dt">splitat =</span> <span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>))
GNdupSplit[[<span class="dv">1</span>]]</code></pre></div>
<pre><code>Method : a

KWIC1 fields : NationalID CollNo DonorID OtherID1 OtherID2
 
                   No..of.Sets     No..of.Records
FuzzyDuplicates            338                744
PhoneticDuplicates          99                260
SemanticDuplicates           2                  5
Total                      439 1009(Distinct:762)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdupSplit[[<span class="dv">3</span>]]</code></pre></div>
<pre><code>Method : a

KWIC1 fields : NationalID CollNo DonorID OtherID1 OtherID2
 
                No..of.Sets    No..of.Records
FuzzyDuplicates          40               136
Total                    40 136(Distinct:136)</code></pre>
<p>Alternatively, two different <code>ProbDup</code> objects can be merged together using the function <code>MergeProbDup</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdupMerged &lt;-<span class="st"> </span><span class="kw"><a href="../reference/MergeProbDup.html">MergeProbDup</a></span>(GNdupSplit[[<span class="dv">1</span>]], GNdupSplit[[<span class="dv">3</span>]])
GNdupMerged</code></pre></div>
<pre><code>Method : a

KWIC1 fields : NationalID CollNo DonorID OtherID1 OtherID2
 
                   No..of.Sets     No..of.Records
FuzzyDuplicates            378                745
PhoneticDuplicates          99                260
SemanticDuplicates           2                  5
Total                      479 1010(Distinct:762)</code></pre>
<p>The summary of accessions according to a grouping factor field(column) in the original database(s) within the probable duplicate sets retrieved in a <code>ProbDup</code> object can be visualized by the <code>ViewProbDup</code> function. The resulting plot can be used to examine the extent of probable duplication within and between groups of accessions records.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load PGR passport databases</span>
GN1 &lt;-<span class="st"> </span>GN1000[<span class="op">!</span><span class="kw">grepl</span>(<span class="st">"^ICG"</span>, GN1000<span class="op">$</span>DonorID), ]
GN1<span class="op">$</span>DonorID &lt;-<span class="st"> </span><span class="ot">NULL</span>
GN2 &lt;-<span class="st"> </span>GN1000[<span class="kw">grepl</span>(<span class="st">"^ICG"</span>, GN1000<span class="op">$</span>DonorID), ]
GN2 &lt;-<span class="st"> </span>GN2[<span class="op">!</span><span class="kw">grepl</span>(<span class="st">"S"</span>, GN2<span class="op">$</span>DonorID), ]
GN2<span class="op">$</span>NationalID &lt;-<span class="st"> </span><span class="ot">NULL</span>

GN1<span class="op">$</span>SourceCountry &lt;-<span class="st"> </span><span class="kw">toupper</span>(GN1<span class="op">$</span>SourceCountry)
GN2<span class="op">$</span>SourceCountry &lt;-<span class="st"> </span><span class="kw">toupper</span>(GN2<span class="op">$</span>SourceCountry)

GN1<span class="op">$</span>SourceCountry &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="st">"UNITED STATES OF AMERICA"</span>, <span class="st">"USA"</span>, GN1<span class="op">$</span>SourceCountry)
GN2<span class="op">$</span>SourceCountry &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="st">"UNITED STATES OF AMERICA"</span>, <span class="st">"USA"</span>, GN2<span class="op">$</span>SourceCountry)

<span class="co"># Specify as a vector the database fields to be used</span>
GN1fields &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"NationalID"</span>, <span class="st">"CollNo"</span>, <span class="st">"OtherID1"</span>, <span class="st">"OtherID2"</span>)
GN2fields &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"DonorID"</span>, <span class="st">"CollNo"</span>, <span class="st">"OtherID1"</span>, <span class="st">"OtherID2"</span>)

<span class="co"># Clean the data</span>
GN1[GN1fields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN1[GN1fields], <span class="cf">function</span>(x) <span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(x))
GN2[GN2fields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN2[GN2fields], <span class="cf">function</span>(x) <span class="kw"><a href="../reference/DataClean.html">DataClean</a></span>(x))
y1 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">"Gujarat"</span>, <span class="st">"Dwarf"</span>), <span class="kw">c</span>(<span class="st">"Castle"</span>, <span class="st">"Cary"</span>), <span class="kw">c</span>(<span class="st">"Small"</span>, <span class="st">"Japan"</span>),
           <span class="kw">c</span>(<span class="st">"Big"</span>, <span class="st">"Japan"</span>), <span class="kw">c</span>(<span class="st">"Mani"</span>, <span class="st">"Blanco"</span>), <span class="kw">c</span>(<span class="st">"Uganda"</span>, <span class="st">"Erect"</span>),
           <span class="kw">c</span>(<span class="st">"Mota"</span>, <span class="st">"Company"</span>))
y2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Dark"</span>, <span class="st">"Light"</span>, <span class="st">"Small"</span>, <span class="st">"Improved"</span>, <span class="st">"Punjab"</span>, <span class="st">"SAM"</span>)
y3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Local"</span>, <span class="st">"Bold"</span>, <span class="st">"Cary"</span>, <span class="st">"Mutant"</span>, <span class="st">"Runner"</span>, <span class="st">"Giant"</span>, <span class="st">"No."</span>,
        <span class="st">"Bunch"</span>, <span class="st">"Peanut"</span>)
GN1[GN1fields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN1[GN1fields],
                         <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeKW</a></span>(x, y1, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN1[GN1fields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN1[GN1fields],
                         <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergePrefix</a></span>(x, y2, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN1[GN1fields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN1[GN1fields],
                         <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeSuffix</a></span>(x, y3, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN2[GN2fields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN2[GN2fields],
                         <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeKW</a></span>(x, y1, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN2[GN2fields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN2[GN2fields],
                         <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergePrefix</a></span>(x, y2, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))
GN2[GN2fields] &lt;-<span class="st"> </span><span class="kw">lapply</span>(GN2[GN2fields],
                         <span class="cf">function</span>(x) <span class="kw"><a href="../reference/MergeKW.html">MergeSuffix</a></span>(x, y3, <span class="dt">delim =</span> <span class="kw">c</span>(<span class="st">"space"</span>, <span class="st">"dash"</span>)))

<span class="co"># Remove duplicated DonorID records in GN2</span>
GN2 &lt;-<span class="st"> </span>GN2[<span class="op">!</span><span class="kw">duplicated</span>(GN2<span class="op">$</span>DonorID), ]

<span class="co"># Generate KWIC index</span>
GN1KWIC &lt;-<span class="st"> </span><span class="kw"><a href="../reference/KWIC.html">KWIC</a></span>(GN1, GN1fields)
GN2KWIC &lt;-<span class="st"> </span><span class="kw"><a href="../reference/KWIC.html">KWIC</a></span>(GN2, GN2fields)

<span class="co"># Specify the exceptions as a vector</span>
exep &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"BIG"</span>, <span class="st">"BOLD"</span>, <span class="st">"BUNCH"</span>, <span class="st">"C"</span>, <span class="st">"COMPANY"</span>, <span class="st">"CULTURE"</span>,
          <span class="st">"DARK"</span>, <span class="st">"E"</span>, <span class="st">"EARLY"</span>, <span class="st">"EC"</span>, <span class="st">"ERECT"</span>, <span class="st">"EXOTIC"</span>, <span class="st">"FLESH"</span>, <span class="st">"GROUNDNUT"</span>,
          <span class="st">"GUTHUKAI"</span>, <span class="st">"IMPROVED"</span>, <span class="st">"K"</span>, <span class="st">"KUTHUKADAL"</span>, <span class="st">"KUTHUKAI"</span>, <span class="st">"LARGE"</span>,
          <span class="st">"LIGHT"</span>, <span class="st">"LOCAL"</span>, <span class="st">"OF"</span>, <span class="st">"OVERO"</span>, <span class="st">"P"</span>, <span class="st">"PEANUT"</span>, <span class="st">"PURPLE"</span>, <span class="st">"R"</span>,
          <span class="st">"RED"</span>, <span class="st">"RUNNER"</span>, <span class="st">"S1"</span>, <span class="st">"SAM"</span>, <span class="st">"SMALL"</span>, <span class="st">"SPANISH"</span>, <span class="st">"TAN"</span>, <span class="st">"TYPE"</span>,
          <span class="st">"U"</span>, <span class="st">"VALENCIA"</span>, <span class="st">"VIRGINIA"</span>, <span class="st">"WHITE"</span>)

<span class="co"># Specify the synsets as a list</span>
syn &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">"CHANDRA"</span>, <span class="st">"AH114"</span>), <span class="kw">c</span>(<span class="st">"TG1"</span>, <span class="st">"VIKRAM"</span>))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GNdupc &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ProbDup.html">ProbDup</a></span>(<span class="dt">kwic1 =</span> GN1KWIC, <span class="dt">kwic2 =</span> GN2KWIC, <span class="dt">method =</span> <span class="st">"c"</span>,
                  <span class="dt">excep =</span> exep, <span class="dt">fuzzy =</span> <span class="ot">TRUE</span>, <span class="dt">phonetic =</span> <span class="ot">TRUE</span>,
                  <span class="dt">encoding =</span> <span class="st">"primary"</span>, <span class="dt">semantic =</span> <span class="ot">TRUE</span>, <span class="dt">syn =</span> syn)</code></pre></div>
<pre><code>Fuzzy matching</code></pre>
<pre><code>
  |                                                                       
  |======================                                           |  33%
Block 1 / 3 |
  |                                                                       
  |===========================================                      |  67%
Block 2 / 3 |
  |                                                                       
  |=================================================================| 100%
Block 3 / 3 |</code></pre>
<pre><code>Phonetic matching</code></pre>
<pre><code>
  |                                                                       
  |======================                                           |  33%
Block 1 / 3 |
  |                                                                       
  |===========================================                      |  67%
Block 2 / 3 |
  |                                                                       
  |=================================================================| 100%
Block 3 / 3 |</code></pre>
<pre><code>Semantic matching</code></pre>
<pre><code>
  |                                                                       
  |======================                                           |  33%
Block 1 / 3 |
  |                                                                       
  |===========================================                      |  67%
Block 2 / 3 |
  |                                                                       
  |=================================================================| 100%
Block 3 / 3 |</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get the summary data.frames and Grob</span>
GNdupcView &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ViewProbDup.html">ViewProbDup</a></span>(GNdupc, GN1, GN2, <span class="st">"SourceCountry"</span>, <span class="st">"SourceCountry"</span>,
                         <span class="dt">max.count =</span> <span class="dv">30</span>, <span class="dt">select =</span> <span class="kw">c</span>(<span class="st">"INDIA"</span>, <span class="st">"USA"</span>), <span class="dt">order =</span> <span class="st">"type"</span>,
                         <span class="dt">main =</span> <span class="st">"Groundnut Probable Duplicates"</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># View the summary data.frames</span>
GNdupcView[[<span class="dv">1</span>]]
GNdupcView[[<span class="dv">2</span>]]</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Plot the summary visualization</span>
<span class="kw">library</span>(gridExtra)
<span class="kw">grid.arrange</span>(GNdupcView[[<span class="dv">3</span>]])</code></pre></div>
<p><img src="Introduction_files/figure-html/unnamed-chunk-56-1.png" width="960"></p>
<p><strong>Fig. 5.</strong> Summary visualization of groundnut probable duplicate sets retrieved according to <code>SourceCountry</code> field.</p>
<p>The function <code>KWCounts</code> can be used to compute the keyword counts from PGR passport database fields(columns) which are considered for identification of probable duplicates. These keyword counts can give a rough indication of the completeness of the data in such fields (Fig. 3).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Compute the keyword counts for the whole data</span>
GNKWCouts &lt;-<span class="st"> </span><span class="kw"><a href="../reference/KWCounts.html">KWCounts</a></span>(GN, GNfields, exep)

<span class="co"># Compute the keyword counts for 'duplicated' records</span>
GND &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ParseProbDup.html">ParseProbDup</a></span>(disGNdup2, <span class="ot">Inf</span>, F)<span class="op">$</span>PRIM_ID

GNDKWCouts &lt;-<span class="st"> </span><span class="kw"><a href="../reference/KWCounts.html">KWCounts</a></span>(GN[GN<span class="op">$</span>NationalID <span class="op">%in%</span><span class="st"> </span>GND, ],
                       GNfields, exep)

<span class="co"># Compute the keyword counts for 'unique' records</span>
GNUKWCouts &lt;-<span class="st"> </span><span class="kw"><a href="../reference/KWCounts.html">KWCounts</a></span>(GN[<span class="op">!</span>GN<span class="op">$</span>NationalID <span class="op">%in%</span><span class="st"> </span>GND, ],
                       GNfields, exep)

<span class="co"># Plot the counts as barplot</span>
<span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">1</span>))

bp1 &lt;-<span class="st"> </span><span class="kw">barplot</span>(<span class="kw">table</span>(GNKWCouts<span class="op">$</span>COUNT),
               <span class="dt">xlab =</span> <span class="st">"Word count"</span>, <span class="dt">ylab =</span> <span class="st">"Frequency"</span>,
               <span class="dt">main =</span> <span class="st">"A"</span>, <span class="dt">col =</span> <span class="st">"#1B9E77"</span>)
<span class="kw">text</span>(bp1, <span class="dv">0</span>, <span class="kw">table</span>(GNKWCouts<span class="op">$</span>COUNT),<span class="dt">cex =</span> <span class="dv">1</span>, <span class="dt">pos =</span> <span class="dv">3</span>)
<span class="kw">legend</span>(<span class="st">"topright"</span>, <span class="kw">paste</span>(<span class="st">"No. of records ="</span>,
                         <span class="kw">nrow</span>(GN)),
       <span class="dt">bty =</span> <span class="st">"n"</span>)

bp2 &lt;-<span class="st"> </span><span class="kw">barplot</span>(<span class="kw">table</span>(GNDKWCouts<span class="op">$</span>COUNT),
               <span class="dt">xlab =</span> <span class="st">"Word count"</span>, <span class="dt">ylab =</span> <span class="st">"Frequency"</span>,
               <span class="dt">main =</span> <span class="st">"B"</span>, <span class="dt">col =</span> <span class="st">"#D95F02"</span>)
<span class="kw">text</span>(bp2, <span class="dv">0</span>, <span class="kw">table</span>(GNDKWCouts<span class="op">$</span>COUNT),<span class="dt">cex =</span> <span class="dv">1</span>, <span class="dt">pos =</span> <span class="dv">3</span>)
<span class="kw">legend</span>(<span class="st">"topright"</span>, <span class="kw">paste</span>(<span class="st">"No. of records ="</span>,
                   <span class="kw">nrow</span>(GN[GN<span class="op">$</span>NationalID <span class="op">%in%</span><span class="st"> </span>GND, ])),
       <span class="dt">bty =</span> <span class="st">"n"</span>)

bp3 &lt;-<span class="st"> </span><span class="kw">barplot</span>(<span class="kw">table</span>(GNUKWCouts<span class="op">$</span>COUNT),
               <span class="dt">xlab =</span> <span class="st">"Word count"</span>, <span class="dt">ylab =</span> <span class="st">"Frequency"</span>,
               <span class="dt">main =</span> <span class="st">"C"</span>, <span class="dt">col =</span> <span class="st">"#7570B3"</span>)
<span class="kw">text</span>(bp3, <span class="dv">0</span>, <span class="kw">table</span>(GNUKWCouts<span class="op">$</span>COUNT),<span class="dt">cex =</span> <span class="dv">1</span>, <span class="dt">pos =</span> <span class="dv">3</span>)
<span class="kw">legend</span>(<span class="st">"topright"</span>, <span class="kw">paste</span>(<span class="st">"No. of records ="</span>,
                   <span class="kw">nrow</span>(GN[<span class="op">!</span>GN<span class="op">$</span>NationalID <span class="op">%in%</span><span class="st"> </span>GND, ])),
       <span class="dt">bty =</span> <span class="st">"n"</span>)</code></pre></div>
<p><img src="Introduction_files/figure-html/unnamed-chunk-57-1.png" width="672"></p>
<p><strong>Fig. 6.</strong> The keyword counts in the database fields considered for identification of probable duplicates for <strong>A.</strong> the entire <code>GN1000</code> dataset, <strong>B.</strong> the probable duplicate records alone and <strong>C.</strong> the unique records alone.</p>
</div>
<div id="citing-pgrdup" class="section level2">
<h2 class="hasAnchor">
<a href="#citing-pgrdup" class="anchor"></a>Citing <code>PGRdup</code>
</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">citation</span>(<span class="st">"PGRdup"</span>)</code></pre></div>
<pre><code>
To cite the R package 'PGRdup' in publications use:

  Aravind, J., J. Radhamani, Kalyani Srinivasan, B. Ananda
  Subhash, and R. K. Tyagi (2018).  PGRdup: Discover Probable
  Duplicates in Plant Genetic Resources Collections. R package
  version 0.2.3.2.

A BibTeX entry for LaTeX users is

  @Manual{,
    title = {PGRdup: Discover Probable Duplicates in Plant Genetic Resources Collections},
    author = {{Aravind J} and {Radhamani J} and {Kalyani Srinivasan} and {Ananda Subhash B} and {Rishi Kumar Tyagi}},
    note = {R package version 0.2.3.2},
    url = {https://cran.r-project.org/package=PGRdup},
    year = {2018},
  }

This free and open-source software implements academic research by
the authors and co-workers. If you use it, please support the
project by citing the package.</code></pre>
</div>
<div id="session-info" class="section level2">
<h2 class="hasAnchor">
<a href="#session-info" class="anchor"></a>Session Info</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sessionInfo</span>()</code></pre></div>
<pre><code>R version 3.4.3 (2017-11-30)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 15063)

Matrix products: default

locale:
[1] LC_COLLATE=English_India.1252  LC_CTYPE=English_India.1252   
[3] LC_MONETARY=English_India.1252 LC_NUMERIC=C                  
[5] LC_TIME=English_India.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] gridExtra_2.3      wordcloud_2.5      RColorBrewer_1.1-2
[4] PGRdup_0.2.3.2     diagram_1.6.4      shape_1.4.3       

loaded via a namespace (and not attached):
 [1] Rcpp_0.12.14           compiler_3.4.3         pillar_1.0.1          
 [4] plyr_1.8.4             highr_0.6              tools_3.4.3           
 [7] digest_0.6.13          evaluate_0.10.1        tibble_1.4.1          
[10] gtable_0.2.0           pkgconfig_2.0.1        rlang_0.1.6           
[13] igraph_1.1.2           microbenchmark_1.4-2.1 yaml_2.1.16           
[16] parallel_3.4.3         stringr_1.2.0          knitr_1.18            
[19] rprojroot_1.3-2        grid_3.4.3             data.table_1.10.4-3   
[22] XML_3.98-1.9           rmarkdown_1.8          ggplot2_2.2.1         
[25] magrittr_1.5           backports_1.1.2        scales_0.5.0          
[28] htmltools_0.3.6        stringdist_0.9.4.6     colorspace_1.3-2      
[31] labeling_0.3           stringi_1.1.6          lazyeval_0.2.1        
[34] munsell_0.4.3          slam_0.1-42           </code></pre>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-knupffer1988european">
<p>Knüpffer, H. 1988. “The European Barley Database of the ECP/GR: An Introduction.” <em>Die Kulturpflanze</em> 36 (1): 135–62. doi:<a href="https://doi.org/https://doi.org/10.1007/BF01986957">https://doi.org/10.1007/BF01986957</a>.</p>
</div>
<div id="ref-kfj97">
<p>Knüpffer, H., L. Frese, and M. W. M. Jongen. 1997. “Using Central Crop Databases: Searching for Duplicates and Gaps.” In <em>Central Crop Databases: Tools for Plant Genetic Resources Management. Report of a Workshop, Budapest, Hungary, 13-16 October 1996</em>, edited by E. Lipman, M. W. M. Jongen, T. J. L. van Hintum, T. Gass, and L. Maggioni, 67–77. Rome, Italy and Wageningen, The Netherlands: International Plant Genetic Resources Institute and Centre for Genetic Resources. <a href="https://www.bioversityinternational.org/index.php?id=244&amp;tx_news_pi1%5Bnews%5D=334&amp;cHash=3738ae238a450ff71bb1cb087687ac9c">https://www.bioversityinternational.org/index.php?id=244&amp;tx_news_pi1%5Bnews%5D=334&amp;cHash=3738ae238a450ff71bb1cb087687ac9c</a>.</p>
</div>
<div id="ref-p00">
<p>Philips, Lawrence. 2000. “The Double Metaphone Search Algorithm.” <em>C/C++ Users Journal</em> 18 (6): 38–43. <a href="http://dl.acm.org/citation.cfm?id=349124.349132" class="uri">http://dl.acm.org/citation.cfm?id=349124.349132</a>.</p>
</div>
<div id="ref-van2014stringdist">
<p>van der Loo, M. P. J. 2014. “The Stringdist Package for Approximate String Matching.” <em>R Journal</em> 6 (1): 111–22. <a href="https://journal.r-project.org/archive/2014/RJ-2014-011/index.html" class="uri">https://journal.r-project.org/archive/2014/RJ-2014-011/index.html</a>.</p>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by J. Aravind, J. Radhamani, Kalyani Srinivasan, B. Ananda Subhash, R. K. Tyagi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
